{"componentChunkName":"component---src-templates-documentation-js","path":"/docs/2.9.0.SNAPSHOT/recipes/batch/sftp-to-jdbc/","result":{"data":{"pages":{"edges":[{"node":{"id":"43289662-0f02-515e-9ecb-1ab87da3e6f0","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"Installation","description":"How to install Data Flow","path":"installation/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"1b51907d-00ba-54ca-9a7a-0376c47f6c71","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/local/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"Local Machine","description":"Local Machine Installation Guide","path":"installation/local/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"f0773390-e5bb-57f7-be06-d34f25f44f6b","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/local/docker/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"Docker Compose","description":"Installation using Docker Compose","path":"installation/local/docker","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"b413291c-314e-5b6b-9f6f-28914edae1fa","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/local/docker-customize/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"Docker Compose Customization","description":"Customize the Docker Compose installation","path":"installation/local/docker-customize","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"9c540fd4-2871-504b-8262-396b327614ba","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/local/manual/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"Manual","description":"Manual installation","path":"installation/local/manual","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"c1772e35-5c1e-5eb5-ace6-6d0bb0f5e6a7","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/cloudfoundry/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"Cloud Foundry","description":"Data Flow Cloud Foundry Installation Guide","path":"installation/cloudfoundry/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"f8b55736-c34d-5c35-ab6c-753484b2756f","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/cloudfoundry/cf-cli/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"Cloud Foundry CLI","description":"Install using the Cloud Foundry CLI","path":"installation/cloudfoundry/cf-cli","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"e41aa9dd-55e1-5a43-9ad0-b622a0400d90","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/cloudfoundry/cf-local/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"Running locally","description":"Configure the local servers to deploy to Cloud Foundry","path":"installation/cloudfoundry/cf-local","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"c1c7c44f-4965-5696-a6cf-83013514b6c9","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/kubernetes/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"Kubernetes","description":"Data Flow Kubernetes Installation Guide","path":"installation/kubernetes/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"3c8f58bd-a947-5ffa-a0e0-5e873b513698","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/kubernetes/creating-a-cluster/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"Creating a Cluster","description":"Creating a Kubernetes Cluster","path":"installation/kubernetes/creating-a-cluster","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"2f384b7a-db9c-573d-b562-b102e06320fa","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/kubernetes/helm/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"Helm","description":"Installation using Helm","path":"installation/kubernetes/helm","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"fc746790-7394-576a-8b38-6f43b3a2a38e","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/kubernetes/kubectl/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"kubectl","description":"Installation using kubectl","path":"installation/kubernetes/kubectl","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"2c6c8950-bd11-5420-a4a9-1c0f613a6a10","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/kubernetes/compatibility/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"Kubernetes Compatibility","description":"Compatibility with Kubernetes Versions","path":"installation/kubernetes/compatibility","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"14cca69a-5cad-5da2-a59c-819568ba0a29","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/migration/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"Migration","description":"Data Flow Version Migration Guide","path":"installation/migration/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"5fdc4b92-a0b1-5a5d-b1f4-a2940605b9f0","fields":{"path":"/docs/2.9.0.SNAPSHOT/installation/migration/migration-2-7-to-2-8/","version":"2.9.0.SNAPSHOT","category":"installation"},"frontmatter":{"title":"Migrate from 2.7 to 2.8","description":"Migrating Spring Cloud Data Flow from version 2.7 to 2.8","path":"installation/migration/migration-2-7-to-2-8","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"3d5e0fe7-69fb-5504-8ea8-4bbf7a05d77c","fields":{"path":"/docs/2.9.0.SNAPSHOT/rfcs/","version":"2.9.0.SNAPSHOT","category":"rfcs"},"frontmatter":{"title":"RFCS","description":"HetuDB RFCS guides","path":"rfcs/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"34ede1d4-3130-5551-9bd7-74afeb8e32e7","fields":{"path":"/docs/2.9.0.SNAPSHOT/rfcs/concept/","version":"2.9.0.SNAPSHOT","category":"rfcs"},"frontmatter":{"title":"Concept","description":"rfcs of concept","path":"rfcs/concept/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"148fb195-e4c2-59a7-9b02-3e79a86da80f","fields":{"path":"/docs/2.9.0.SNAPSHOT/rfcs/cloudsrv/","version":"2.9.0.SNAPSHOT","category":"rfcs"},"frontmatter":{"title":"Cloudsrv","description":"rfcs of cloudsrv","path":"rfcs/cloudsrv/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"5874d34c-30fb-5552-b13c-22ab26e8f73f","fields":{"path":"/docs/2.9.0.SNAPSHOT/rfcs/query/","version":"2.9.0.SNAPSHOT","category":"rfcs"},"frontmatter":{"title":"Query","description":"rfcs of query","path":"rfcs/query/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"37e198a8-7456-566b-b654-c49a4c4c8c99","fields":{"path":"/docs/2.9.0.SNAPSHOT/rfcs/storage/","version":"2.9.0.SNAPSHOT","category":"rfcs"},"frontmatter":{"title":"Storage","description":"rfcs of storage","path":"rfcs/storage/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"71bdd377-ddb1-5f5a-a05c-85c093b7170c","fields":{"path":"/docs/2.9.0.SNAPSHOT/rfcs/cli/","version":"2.9.0.SNAPSHOT","category":"rfcs"},"frontmatter":{"title":"Cli","description":"rfcs of cli","path":"rfcs/cli/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"1225ebae-101d-53e5-93d8-a340c998c2bf","fields":{"path":"/docs/2.9.0.SNAPSHOT/rfcs/other/","version":"2.9.0.SNAPSHOT","category":"rfcs"},"frontmatter":{"title":"Other","description":"rfcs of other","path":"rfcs/other/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"361815bf-82e5-51f4-ac1b-eeaa358af7fa","fields":{"path":"/docs/2.9.0.SNAPSHOT/concepts/","version":"2.9.0.SNAPSHOT","category":"concepts"},"frontmatter":{"title":"Concepts","description":"Core Concepts in Spring Cloud Data Flow","path":"concepts/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"cb779d0a-98da-5994-b2e5-f448f5bc684d","fields":{"path":"/docs/2.9.0.SNAPSHOT/concepts/architecture/","version":"2.9.0.SNAPSHOT","category":"concepts"},"frontmatter":{"title":"Architecture","description":"Introduction to Data Flow's Architecture.","path":"concepts/architecture/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"74258f69-ad0c-576e-9f85-860afc2b4568","fields":{"path":"/docs/2.9.0.SNAPSHOT/concepts/streams/","version":"2.9.0.SNAPSHOT","category":"concepts"},"frontmatter":{"title":"Stream Processing","description":"Stream Processing Framework and Concepts","path":"concepts/streams/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"3d9a87a7-c3de-521b-b6c4-768152c3d3d9","fields":{"path":"/docs/2.9.0.SNAPSHOT/concepts/batch-jobs/","version":"2.9.0.SNAPSHOT","category":"concepts"},"frontmatter":{"title":"Batch Processing","description":"Batch Processing Framework and Concepts","path":"concepts/batch-jobs/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"8ff1cc17-bccf-5294-9f07-e72dfcfe14e8","fields":{"path":"/docs/2.9.0.SNAPSHOT/concepts/monitoring/","version":"2.9.0.SNAPSHOT","category":"concepts"},"frontmatter":{"title":"Monitoring","description":"Runtime monitoring of Servers, Stream and Task data pipelines","path":"concepts/monitoring/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"bbb0eafc-4244-5c43-92a3-c96ed63cff45","fields":{"path":"/docs/2.9.0.SNAPSHOT/concepts/tooling/","version":"2.9.0.SNAPSHOT","category":"concepts"},"frontmatter":{"title":"Tooling","description":"Dashboard and Shell","path":"concepts/tooling/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"7386e509-a7f0-5b44-8de9-1279bc9ebd80","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Stream Developer guides ","description":"Learn how to create Streaming data pipelines using prebuilt microservices or create your own.","path":"stream-developer-guides/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"57cc7ae3-af79-56a9-bcbc-d3a2e9fa8865","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/getting-started/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Getting Started","description":"Getting Started with Stream Processing","path":"stream-developer-guides/getting-started/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"1dc3c5d4-ed17-52ee-a2e4-e729f5acc504","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/getting-started/stream/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Stream Processing","description":"Create and deploy a streaming data pipeline using prebuilt applications on your Local Machine","path":"stream-developer-guides/getting-started/stream/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"c36811b7-fdb0-5a54-8a42-ac8db8a662fa","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/streams/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Stream Development","description":"Stream Processing Developer Guide","path":"stream-developer-guides/streams/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"f6a95412-7950-5b6d-97b8-dbbfe6f5b5a6","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/streams/standalone-stream-sample/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Stream Application Development","description":"Create your own microservices for Stream processing and deploy them manually","path":"stream-developer-guides/streams/standalone-stream-sample/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"27c0d972-6085-5f0e-ae96-5844c8d9f253","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/streams/deployment/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Stream Application Deployment","description":"Deploy stream sample applications","path":"stream-developer-guides/streams/deployment","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"1d7295a3-c272-57a2-a3d4-f4e8f66f7688","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/streams/deployment/local/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Deploy sample stream applications to local host","description":"Deploy sample stream applications to local host ","path":"stream-developer-guides/streams/deployment/local","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"fa33fe76-8a79-5b0f-a5c0-0fb03b3957f1","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/streams/deployment/kubernetes/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Deploy sample stream applications to Kubernetes","description":"Deploy sample stream applications to Kubernetes","path":"stream-developer-guides/streams/deployment/kubernetes","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"0af696fd-f7e6-5835-b86a-f25e14cde4f0","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/streams/deployment/cloudfoundry/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Deploy sample stream applications to Cloud Foundry","description":"Deploy sample stream applications to Cloud Foundry","path":"stream-developer-guides/streams/deployment/cloudfoundry","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"4ab240da-2575-5892-a6ad-833da9bad88d","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/streams/data-flow-stream/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Stream Processing using Spring Cloud Data Flow","description":"Create and Deploy a Stream Processing Pipeline using Spring Cloud Data Flow","path":"stream-developer-guides/streams/data-flow-stream/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"7f6b5247-2655-5f3a-a1b7-9bbefa9c5a7a","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/streams/stream-other-binders/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Spring Application Development on other Messaging Middleware","description":"Create your own microservices for Stream processing using other messaging middleware such as Google Pub/Sub, Amazon Kinesis, and Solace JMS","path":"stream-developer-guides/streams/stream-other-binders/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"c4dd4fe4-bd43-5e90-be90-5ae8beef9449","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/programming-models/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Programming Models","description":"Programming models","path":"stream-developer-guides/programming-models/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"1094591c-1594-5b99-a386-b1d7e74726d4","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/continuous-delivery/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Continuous Delivery","description":"CD using Skipper","path":"stream-developer-guides/continuous-delivery/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"eed833aa-ae8e-5b21-9ede-63281c491978","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/continuous-delivery/cd-basics/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Continuous Delivery of streaming applications","description":"Continuous Delivery of Streaming applications","path":"stream-developer-guides/continuous-delivery/cd-basics/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"9867eea0-846d-5666-b299-4ad635df071d","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/troubleshooting/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Troubleshooting","description":"Troubleshooting Streams","path":"stream-developer-guides/troubleshooting/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"4bb10434-6058-555d-b05d-3fa838a92dda","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/troubleshooting/debugging-stream-apps/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Debugging Stream Applications","description":"Debugging Stream Applications outside of Data Flow","path":"stream-developer-guides/troubleshooting/debugging-stream-apps/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"89a1123c-f97f-5496-be68-aa9f5f19da04","fields":{"path":"/docs/2.9.0.SNAPSHOT/stream-developer-guides/troubleshooting/debugging-scdf-streams/","version":"2.9.0.SNAPSHOT","category":"stream-developer-guides"},"frontmatter":{"title":"Debugging Stream applications deployed by Data Flow","description":"Debugging Data Flow Stream deployments","path":"stream-developer-guides/troubleshooting/debugging-scdf-streams/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"20069298-ef34-5b8c-9174-e9d7fb8b4bcd","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Batch Developer guides ","description":"Learn how to create Batch data pipelines using prebuilt microservices or create your own","path":"batch-developer-guides/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"58827917-746f-5457-b133-afe0693cf5cc","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/getting-started/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Getting Started","description":"Getting Started with Batch","path":"batch-developer-guides/getting-started/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"c828dbf2-e569-5dbf-a234-b049991122d1","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/getting-started/task/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Task Processing","description":"Create and deploy a simple Task pipeline using a prebuilt Task application on your local machine","path":"batch-developer-guides/getting-started/task/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"61de93df-3e47-5adc-bc43-b5dc5413fb3b","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/batch/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Batch Development","description":"Batch Developer Guide","path":"batch-developer-guides/batch/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"b0bc90e5-051b-51e2-95bf-430b20f71d55","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/batch/spring-task/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Simple Task","description":"Create a simple Spring Boot Application using Spring Cloud Task","path":"batch-developer-guides/batch/spring-task/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"5ac415ed-1b15-535d-a7c6-3ab9ef016107","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/batch/spring-batch/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Spring Batch Jobs","description":"Create a Spring Batch Job","path":"batch-developer-guides/batch/spring-batch/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"1626b6a8-1450-50aa-9666-4e2b607f5cbe","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/batch/data-flow-simple-task/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Register and Launch a Spring Cloud Task application using Data Flow","description":"Register and Launch a Spring Cloud Task application using Data Flow","path":"batch-developer-guides/batch/data-flow-simple-task/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"0ac0ff52-c5c6-5d42-8d45-dbce66c6cebf","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/batch/data-flow-spring-batch/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Register and launch a Spring Batch application using Data Flow","description":"Register and launch a Spring Batch application using Data Flow","path":"batch-developer-guides/batch/data-flow-spring-batch/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"33e5c969-fb15-5f7e-9110-322bc5904312","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/batch/data-flow-composed-task/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Create and launch a Composed Task using Data Flow","description":"Create and launch a Composed Task using Data Flow","path":"batch-developer-guides/batch/data-flow-composed-task/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"28fc4ba8-47bf-541b-ae49-84df232cad93","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/batch/data-flow-simple-task-kubernetes/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Deploying a task application on Kubernetes with Data Flow","description":"Guide to deploying spring-cloud-stream-task applications on Kubernetes using Spring Cloud Data Flow","path":"batch-developer-guides/batch/data-flow-simple-task-kubernetes/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"960d7692-e19e-5f6a-80da-d13ca1ce55be","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/batch/data-flow-simple-task-cloudfoundry/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Deploying a task application on Cloud Foundry using Spring Cloud Data Flow","description":"Guide to deploying spring-cloud-stream-task applications on Cloud Foundry using Spring Cloud Data Flow","path":"batch-developer-guides/batch/data-flow-simple-task-cloudfoundry/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"071eab55-46da-53f9-87b2-8a9e0d8fe190","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/continuous-deployment/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Continuous Deployment","description":"Continuous Deployment for task applications","path":"batch-developer-guides/continuous-deployment/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"e7630e22-e0cd-55d6-9b99-603dcd1ae489","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/continuous-deployment/cd-basics/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Continuous Deployment of task applications","description":"This section discusses how to use Continuous Deployment of Tasks in SCDF","path":"batch-developer-guides/continuous-deployment/cd-basics/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"bebc85f3-bcec-5c1a-b269-d6967bc111b6","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/troubleshooting/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Troubleshooting","description":"Troubleshooting Batch Jobs","path":"batch-developer-guides/troubleshooting/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"13401e9e-96f0-5bff-8d1d-08541872bc9f","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/troubleshooting/debugging-task-apps/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Debugging Batch applications","description":"Debugging Batch applications","path":"batch-developer-guides/troubleshooting/debugging-task-apps/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"f4fe93ef-b63c-5e5e-b933-a3ca204dc5d9","fields":{"path":"/docs/2.9.0.SNAPSHOT/batch-developer-guides/troubleshooting/debugging-scdf-tasks/","version":"2.9.0.SNAPSHOT","category":"batch-developer-guides"},"frontmatter":{"title":"Debugging Batch applications deployed by Data Flow","description":"Debugging Batch applications deployed by Data Flow","path":"batch-developer-guides/troubleshooting/debugging-scdf-tasks/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"ad5b54f8-6cf2-5d41-a374-e1a1448a3588","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Feature guides","description":"High level overview of Data Flow Features","path":"feature-guides/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"9b6071aa-86ab-5d18-9a68-33bdd2e476ba","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/general/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"General","description":"General Features in Data Flow","path":"feature-guides/general/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"ab501ed7-1bbf-5a11-8fb8-e6a0018e8d1f","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/general/server-monitoring/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Server Monitoring","description":"Monitoring Data Flow and Skipper servers","path":"feature-guides/general/server-monitoring/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"6cd3adef-7b3c-5d99-9e58-eaaf9dc2716b","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/streams/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Streams","description":"Stream Features in Data Flow","path":"feature-guides/streams/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"9077456d-d618-5639-b401-2e10a980bc30","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/streams/deployment-properties/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Deployment Properties","description":"Initiate a stream deployment with deployment property overrides","path":"feature-guides/streams/deployment-properties/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"8348ecab-75cb-58bf-8ed3-9972b2ba8b49","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/streams/function-composition/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Composing Functions","description":"Daisy-chain Java functions in an existing Spring Cloud Stream application","path":"feature-guides/streams/function-composition/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"ae6ff0a2-3e68-5cd3-b8d7-d7feb55d35b6","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/streams/named-destinations/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Named Destinations","description":"Use the Named Destinations to interact with the Topics/Queues directly","path":"feature-guides/streams/named-destinations/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"bec7a5e9-39a8-5add-b61d-c96625bfbbcb","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/streams/monitoring/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Stream Monitoring","description":"Monitoring streaming data pipelines with Prometheus and InfluxDB","path":"feature-guides/streams/monitoring/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"52e4cee7-4ea3-599e-ab0c-07cbf33a9a06","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/streams/tracing/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Stream Distributed Tracing","description":"Tracing streaming data pipelines","path":"feature-guides/streams/tracing/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"9d3e8f23-70d1-54e6-9247-e88fd5b06ed8","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/streams/stream-application-dsl/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Stream Application DSL","description":"Learn how to use the Stream Application DSL","path":"feature-guides/streams/stream-application-dsl/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"98237c28-36b2-5ff3-a802-f4a540cb208c","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/streams/labels/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Labeling Applications","description":"Label the stream applications to uniquely interact with them","path":"feature-guides/streams/labels/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"e130ff5a-d776-5430-8b69-fadc0a226b1f","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/streams/application-count/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Application Count","description":"Initiate stream deployment with multiple application instances","path":"feature-guides/streams/application-count/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"6ce5b8dc-223c-5ad2-beb4-fca4ae9fcf03","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/streams/fanin-fanout/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Fan-in and Fan-out","description":"Publish and subscribe to multiple destinations using the fan-in and fan-out capabilities","path":"feature-guides/streams/fanin-fanout/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"a6042141-751d-552a-a640-dbcd593bd7a9","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/streams/partitioning/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Data Partitioning","description":"Learn more about data partitioning support to build stateful streaming data pipelines","path":"feature-guides/streams/partitioning/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"e66e0b4d-56b9-5970-8338-6719aeca9338","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/streams/scaling/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Scaling","description":"Scaling streaming data pipeline with Spring Cloud Data Flow","path":"feature-guides/streams/scaling/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"3fbe3d44-a142-5c37-b61c-16139f00d81b","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/streams/java-dsl/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Stream Java DSL","description":"Programmatically create streams using the Java DSL","path":"feature-guides/streams/java-dsl/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"414b1d79-43cd-5855-82b2-3089e68742d0","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/streams/taps/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Tapping a Stream","description":"Create a stream from another stream without interrupting the data processing","path":"feature-guides/streams/taps/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"b9badb3c-8fa2-52a9-8cb8-857e5218b517","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/batch/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Batch","description":"Batch Features in Data Flow","path":"feature-guides/batch/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"47d7c1d0-08df-5031-801e-cf80b53cd164","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/batch/deployment-properties/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Deployment Properties","description":"Initiate a Batch deployment with deployment property overrides","path":"feature-guides/batch/deployment-properties/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"b2848ec3-12c7-5ab6-9f99-8960b298c519","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/batch/scheduling/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Scheduling Batch Jobs","description":"Learn how to schedule Batch Jobs","path":"feature-guides/batch/scheduling/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"670d052a-2946-5145-b515-8b1af19290d9","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/batch/partitioning/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Remote Partitioned Batch Job","description":"Learn more about partitioning support for Batch Jobs","path":"feature-guides/batch/partitioning/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"f20d5b29-8f58-514e-9286-a7e610db7735","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/batch/monitoring/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Task Monitoring","description":"Monitoring task data pipelines with InfluxDB","path":"feature-guides/batch/monitoring/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"1d518556-0ecf-5209-8d5b-bfffffebadd9","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/batch/restarting/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Restarting Batch Jobs","description":"Learn how to restart Batch Jobs","path":"feature-guides/batch/restarting/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"4255951a-b7e5-5c50-b683-9b3d35395853","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/batch/composed-task/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Composed Tasks","description":"Learn how to create and manage composed tasks","path":"feature-guides/batch/composed-task/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"c6d3dccb-0c34-5d20-bd76-0fbf3a2e6e0e","fields":{"path":"/docs/2.9.0.SNAPSHOT/feature-guides/batch/java-dsl/","version":"2.9.0.SNAPSHOT","category":"feature-guides"},"frontmatter":{"title":"Task Java DSL","description":"Programmatically create tasks using the Java DSL","path":"feature-guides/batch/java-dsl/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"a0784fd1-087a-5fde-9331-7e44bf336898","fields":{"path":"/docs/2.9.0.SNAPSHOT/commercial-feature-guides/","version":"2.9.0.SNAPSHOT","category":"commercial-feature-guides"},"frontmatter":{"title":"Commercial feature guides","description":"High level overview of Data Flow Commercial Feature Guide","path":"commercial-feature-guides/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"72597697-0b87-5815-9667-7e023f5ee2fb","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Recipes","description":"Recipes that help solve some common use-cases","path":"recipes/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"3e3b77e3-67f8-528a-a03f-de4e7885c3d4","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/polyglot/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Polyglot","description":"Using multiple programming languages","path":"recipes/polyglot/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"c3fa2c33-ef8d-5ec7-af00-f1cb3b4ff4b6","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/polyglot/processor/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Python Stream Processor","description":"Python Application as a Data Flow Stream Processor","path":"recipes/polyglot/processor/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"d9026ffa-061d-59a2-a68a-9a8ff4b3c5c1","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/polyglot/task/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Python Task","description":"Create and Deploy a Python Task","path":"recipes/polyglot/task/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"8aa1ca22-45e0-5b23-9642-43fb6885b7da","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/polyglot/app/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Python Application","description":"Create and Deploy a Python Application in a Stream","path":"recipes/polyglot/app/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"7d3ee7f4-7bb0-5628-8900-b534b01f0c9f","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/rabbitmq/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"RabbitMQ","description":"RabbitMQ","path":"recipes/rabbitmq/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"72c65250-fc1d-5518-b0b5-04f0d2b4bae0","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/rabbitmq/rabbit-source-sink/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"RabbitMQ as Source and Sink","description":"RabbitMQ as Source and Sink + RabbitMQ binder","path":"recipes/rabbitmq/rabbit-source-sink/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"b23fb3bf-aee6-59cb-b764-41cca32613cd","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/kafka/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Apache Kafka","description":"Kafka","path":"recipes/kafka/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"29e3fc0a-7a1f-5385-ac5f-772173c1bcce","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/kafka/ext-kafka-cluster-cf/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"External Kafka Cluster","description":"Connect to an external Kafka Cluster from Cloud Foundry","path":"recipes/kafka/ext-kafka-cluster-cf/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"c9e535ef-39d4-59c3-936b-84f7cf5d7df1","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/kinesis/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Amazon Kinesis","description":"Amazon Kinesis","path":"recipes/kinesis/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"769dce58-5c2f-5a53-8a79-9d9aed634aac","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/kinesis/simple-producer-consumer/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Amazon Kinesis Binder","description":"A sample of Spring Cloud Stream + Amazon Kinesis Binder in action","path":"recipes/kinesis/simple-producer-consumer/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"ab1b0cf0-7f9d-5f6e-8007-e3a2713fa8b9","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/multi-platform-deployment/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Multiple Platform Deployments","description":"Multiple Platform Deployments","path":"recipes/multi-platform-deployment/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"952ef8e9-eca9-5dda-b172-4474a2500e65","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/multi-platform-deployment/multiple-platform-accounts/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Role of Multiple Platform Deployments","description":"A walk-through of multiple platform requirements and the configurations for Cloud Foundry and Kubernetes","path":"recipes/multi-platform-deployment/multiple-platform-accounts","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"7a1b2582-bb27-5622-bae2-31193d84abed","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/multi-platform-deployment/multi-platform-task/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Multiple Platform support for Tasks","description":"Learn how to launch and schedule tasks across multiple platforms","path":"recipes/multi-platform-deployment/multi-platform-task","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"2f941906-b564-517c-9b95-2871cb948c5a","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/scaling/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Scaling","description":"Prometheus and Data Flow to autoscale streaming data pipelines","path":"recipes/scaling/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"86d75db9-94f9-5954-bba5-fb4934ab1f94","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/scaling/manual-scaling/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Manual Scaling","description":"Scale applications using SCDF Shell","path":"recipes/scaling/manual-scaling/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"b1eb4303-2ef0-5e65-97ca-24e6e33a925b","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/scaling/autoscaling/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Autoscaling","description":"Autoscale streaming data pipeline with SCDF and Prometheus","path":"recipes/scaling/autoscaling/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"778705af-7a48-5c85-8ec4-d292f2d04d75","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/batch/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Batch","description":"Using Spring Cloud Data Flow with Spring Batch","path":"recipes/batch/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"2897c372-b8c1-5146-9911-daa874d9d2cc","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/batch/batch-only-mode/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Batch-only Mode","description":"Set up Spring Cloud Data Flow to use only batch and not streams","path":"recipes/batch/batch-only-mode/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"3af0b704-8ef1-5154-ab35-85a853bd7fb9","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/batch/sftp-to-jdbc/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"SFTP to JDBC","description":"Ingest Files from SFTP to a JDBC data store using Data Flow and Spring Batch","path":"recipes/batch/sftp-to-jdbc/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"661e3b88-238e-5e97-a38f-7ce2a29cc4f5","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/functional-apps/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Functional Applications","description":"Using Functional Approach in Spring Cloud Stream applications","path":"recipes/functional-apps/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"ed5b665a-5d2a-57e2-8ceb-a6fe46661741","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/functional-apps/scst-function-bindings/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Functional Applications","description":"Configuring the Spring Cloud Stream Functional applications","path":"recipes/functional-apps/scst-function-bindings/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"ec53e356-3cec-529d-93ed-cf5fa94957e9","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/cloud-providers/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"Cloud Providers","description":"Using functionality provided by cloud providers","path":"recipes/cloud-providers/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"00be4cac-cf8a-5e9e-80c9-666cd518631c","fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/cloud-providers/gke-regional-clusters/","version":"2.9.0.SNAPSHOT","category":"recipes"},"frontmatter":{"title":"GKE Regional Clusters","description":"Deploying Spring Cloud Data Flow to a GKE Regional Cluster","path":"recipes/cloud-providers/gke-regional-clusters/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"bcbac36b-ac1c-56e5-9823-dcb449993edd","fields":{"path":"/docs/2.9.0.SNAPSHOT/resources/","version":"2.9.0.SNAPSHOT","category":"resources"},"frontmatter":{"title":"Resources","description":"Sample Applications, References Docs, Videos, Blogs...","path":"resources/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"7e52dfe4-812c-5103-ba4b-27897aa80ef3","fields":{"path":"/docs/2.9.0.SNAPSHOT/resources/reference-docs/","version":"2.9.0.SNAPSHOT","category":"resources"},"frontmatter":{"title":"Reference Documentation","description":"Collection of reference guides for Spring Cloud Data Flow","path":"resources/reference-docs/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"324f8dd2-ec84-56ec-a48d-486c94a44b80","fields":{"path":"/docs/2.9.0.SNAPSHOT/resources/samples/","version":"2.9.0.SNAPSHOT","category":"resources"},"frontmatter":{"title":"Samples","description":"Collection of samples","path":"resources/samples/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"ad62cd2b-6f52-5592-9a6a-69a79059b818","fields":{"path":"/docs/2.9.0.SNAPSHOT/resources/faq/","version":"2.9.0.SNAPSHOT","category":"resources"},"frontmatter":{"title":"Frequently Asked Questions","description":"","path":"resources/faq/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"14f71567-6826-571d-b8b7-ca126f14026e","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"Applications","description":"Using stream and task applications","path":"applications/","meta_title":null,"meta_description":null,"keywords":null}}},{"node":{"id":"d7a242c6-63e7-5bfc-b322-9b1ad368e8bb","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/aggregator-processor/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"aggregator-processor Migration","description":"aggregator-processor Migration","path":"applications/migration/aggregator-processor","meta_title":null,"meta_description":null,"keywords":["application","migration","aggregator-processor"]}}},{"node":{"id":"2105a04f-cc29-5afc-9c7d-cd76ced2881f","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/ftp-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"ftp-source Migration","description":"ftp-source Migration","path":"applications/migration/ftp-source","meta_title":null,"meta_description":null,"keywords":["application","migration","ftp-source"]}}},{"node":{"id":"a1996399-eeea-5ce6-b549-f7e29633fa80","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/header-enricher-processor/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"header-enricher-processor Migration","description":"header-enricher-processor Migration","path":"applications/migration/header-enricher-processor","meta_title":null,"meta_description":null,"keywords":["application","migration","header-enricher-processor"]}}},{"node":{"id":"75f4f63b-0156-545d-bfd8-830a5daa0493","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/http-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"http-source Migration","description":"http-source Migration","path":"applications/migration/http-source","meta_title":null,"meta_description":null,"keywords":["application","migration","http-source"]}}},{"node":{"id":"b59a37ec-1ffe-51ee-9d08-924ab27cde71","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/cassandra-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"cassandra-sink Migration","description":"cassandra-sink Migration","path":"applications/migration/cassandra-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","cassandra-sink"]}}},{"node":{"id":"7bba682e-2ed4-519c-bb40-112b526c464c","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/image-recognition-processor/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"image-recognition-processor Migration","description":"image-recognition-processor Migration","path":"applications/migration/image-recognition-processor","meta_title":null,"meta_description":null,"keywords":["application","migration","image-recognition-processor"]}}},{"node":{"id":"5072a9bb-577f-5ba2-a488-2277e3afe888","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/jdbc-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"jdbc-sink Migration","description":"jdbc-sink Migration","path":"applications/migration/jdbc-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","jdbc-sink"]}}},{"node":{"id":"d768b5b3-8cbf-5af1-8a53-534bdb6d1cb7","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/jdbc-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"jdbc-source Migration","description":"jdbc-source Migration","path":"applications/migration/jdbc-source","meta_title":null,"meta_description":null,"keywords":["application","migration","jdbc-source"]}}},{"node":{"id":"a5747694-45e9-5d3c-bfc8-1df825547732","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/jms-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"jms-source Migration","description":"jms-source Migration","path":"applications/migration/jms-source","meta_title":null,"meta_description":null,"keywords":["application","migration","jms-source"]}}},{"node":{"id":"acbb5652-1245-5c4e-bd3b-06e3322e3e7f","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/load-generator-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"load-generator-source Migration","description":"load-generator-source Migration","path":"applications/migration/load-generator-source","meta_title":null,"meta_description":null,"keywords":["application","migration","load-generator-source"]}}},{"node":{"id":"6d469636-b888-553f-824c-11ce6397542a","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/log-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"log-sink Migration","description":"log-sink Migration","path":"applications/migration/log-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","log-sink"]}}},{"node":{"id":"a750d7d9-0dac-5a59-b90a-bb5e5a466d90","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/mail-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"mail-source Migration","description":"mail-source Migration","path":"applications/migration/mail-source","meta_title":null,"meta_description":null,"keywords":["application","migration","mail-source"]}}},{"node":{"id":"bddb7040-d9c4-5c8c-ba85-15326b8079a8","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/mongodb-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"mongodb-sink Migration","description":"mongodb-sink Migration","path":"applications/migration/mongodb-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","mongodb-sink"]}}},{"node":{"id":"df0f24e7-d123-57bd-aef1-b7f51be4a8d3","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/cdc-debezium-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"cdc-debezium-source Migration","description":"cdc-debezium-source Migration","path":"applications/migration/cdc-debezium-source","meta_title":null,"meta_description":null,"keywords":["application","migration","cdc-debezium-source"]}}},{"node":{"id":"8330eadc-c661-5580-a826-35459e532f74","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/mongodb-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"mongodb-source Migration","description":"mongodb-source Migration","path":"applications/migration/mongodb-source","meta_title":null,"meta_description":null,"keywords":["application","migration","mongodb-source"]}}},{"node":{"id":"621b995f-67e4-5bae-862a-2d98e6168010","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/mqtt-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"mqtt-sink Migration","description":"mqtt-sink Migration","path":"applications/migration/mqtt-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","mqtt-sink"]}}},{"node":{"id":"59bf3e8c-585e-5735-af64-2b8eca36b993","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/mqtt-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"mqtt-source Migration","description":"mqtt-source Migration","path":"applications/migration/mqtt-source","meta_title":null,"meta_description":null,"keywords":["application","migration","mqtt-source"]}}},{"node":{"id":"bdae7d25-a64a-5dc1-91ef-3600b9a724b6","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/object-detection-processor/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"object-detection-processor Migration","description":"object-detection-processor Migration","path":"applications/migration/object-detection-processor","meta_title":null,"meta_description":null,"keywords":["application","migration","object-detection-processor"]}}},{"node":{"id":"3cd9481c-08fe-5350-9e54-779f8f25d278","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/pgcopy-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"pgcopy-sink Migration","description":"pgcopy-sink Migration","path":"applications/migration/pgcopy-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","pgcopy-sink"]}}},{"node":{"id":"9e003462-319d-5598-9be5-60098e562d04","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/rabbit-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"rabbit-sink Migration","description":"rabbit-sink Migration","path":"applications/migration/rabbit-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","rabbit-sink"]}}},{"node":{"id":"5a4b022c-7950-5b18-93df-d4b7b57ba0f0","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/rabbit-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"rabbit-source Migration","description":"rabbit-source Migration","path":"applications/migration/rabbit-source","meta_title":null,"meta_description":null,"keywords":["application","migration","rabbit-source"]}}},{"node":{"id":"76a086dc-b0b2-5d12-9787-f67d5f9491a3","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/router-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"router-sink Migration","description":"router-sink Migration","path":"applications/migration/router-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","router-sink"]}}},{"node":{"id":"4a0c5101-14b6-5a8d-9b34-48dc991754f1","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/s3-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"s3-sink Migration","description":"s3-sink Migration","path":"applications/migration/s3-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","s3-sink"]}}},{"node":{"id":"7d9ea654-105d-5597-84ec-2cbb125fe0e0","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/s3-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"s3-source Migration","description":"s3-source Migration","path":"applications/migration/s3-source","meta_title":null,"meta_description":null,"keywords":["application","migration","s3-source"]}}},{"node":{"id":"7a488172-165b-541f-abf0-ed10b3b20bcf","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/sftp-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"sftp-sink Migration","description":"sftp-sink Migration","path":"applications/migration/sftp-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","sftp-sink"]}}},{"node":{"id":"0079b26f-aaf6-5da5-98b6-507a8b83d419","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/sftp-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"sftp-source Migration","description":"sftp-source Migration","path":"applications/migration/sftp-source","meta_title":null,"meta_description":null,"keywords":["application","migration","sftp-source"]}}},{"node":{"id":"79a29229-f961-5afd-b2b6-2b382dc53e0c","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/splitter-processor/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"splitter-processor Migration","description":"splitter-processor Migration","path":"applications/migration/splitter-processor","meta_title":null,"meta_description":null,"keywords":["application","migration","splitter-processor"]}}},{"node":{"id":"a0c9c8e0-87b8-5868-bc08-b16034f9a18a","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/syslog-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"syslog-source Migration","description":"syslog-source Migration","path":"applications/migration/syslog-source","meta_title":null,"meta_description":null,"keywords":["application","migration","syslog-source"]}}},{"node":{"id":"6736f367-9944-5e1d-9454-58d2da7bdf27","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/tcp-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"tcp-sink Migration","description":"tcp-sink Migration","path":"applications/migration/tcp-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","tcp-sink"]}}},{"node":{"id":"907fa15b-175d-5ac7-83a3-22b030cb4129","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/tcp-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"tcp-source Migration","description":"tcp-source Migration","path":"applications/migration/tcp-source","meta_title":null,"meta_description":null,"keywords":["application","migration","tcp-source"]}}},{"node":{"id":"07b468f0-183d-57e8-adc1-ada18e06c714","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/throughput-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"throughput-sink Migration","description":"throughput-sink Migration","path":"applications/migration/throughput-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","throughput-sink"]}}},{"node":{"id":"0429805b-ecd5-5fc0-9eed-288dc0cde688","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/time-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"time-source Migration","description":"time-source Migration","path":"applications/migration/time-source","meta_title":null,"meta_description":null,"keywords":["application","migration","time-source"]}}},{"node":{"id":"7848bf99-ae83-5987-a499-291a58476b19","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/file-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"file-sink Migration","description":"file-sink Migration","path":"applications/migration/file-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","file-sink"]}}},{"node":{"id":"eca22e45-6188-575f-a811-c41bdb760fe0","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/websocket-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"websocket-sink Migration","description":"websocket-sink Migration","path":"applications/migration/websocket-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","websocket-sink"]}}},{"node":{"id":"b7dca357-3d74-57e4-9aec-2cbc1c86751f","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/file-source/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"file-source Migration","description":"file-source Migration","path":"applications/migration/file-source","meta_title":null,"meta_description":null,"keywords":["application","migration","file-source"]}}},{"node":{"id":"157542f6-c8f3-54c2-af59-99965a952580","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/filter-processor/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"filter-processor Migration","description":"filter-processor Migration","path":"applications/migration/filter-processor","meta_title":null,"meta_description":null,"keywords":["application","migration","filter-processor"]}}},{"node":{"id":"2b2c0043-b2c0-5507-b54a-1af1f921bf05","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/ftp-sink/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"ftp-sink Migration","description":"ftp-sink Migration","path":"applications/migration/ftp-sink","meta_title":null,"meta_description":null,"keywords":["application","migration","ftp-sink"]}}},{"node":{"id":"f2c6cba3-66f8-53bc-b90f-b597ac807e6d","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/pre-packaged/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"Pre-packaged Applications","description":"Pre-packaged stream applications version 3.x","path":"applications/pre-packaged","meta_title":null,"meta_description":null,"keywords":["application","pre-packaged"]}}},{"node":{"id":"a8424d3d-d5e2-5295-9bc2-3d6dd843fb16","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/pre-packaged2x/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"Pre-packaged Applications 2.x","description":"Pre-packaged stream and task applications (Einstein release)","path":"applications/pre-packaged2x","meta_title":null,"meta_description":null,"keywords":["application","pre-packaged"]}}},{"node":{"id":"f56b12c4-7ad2-51c0-93be-c2878648765f","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/migration/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"Migration Guide for Pre-packaged Stream Applications","description":"Guide for migrating fom 2.x to 3.x Stream Applications","path":"applications/migration","meta_title":null,"meta_description":null,"keywords":["application","migration","pre-packaged"]}}},{"node":{"id":"d70c2ad0-d13b-5e53-aadd-6205b102144e","fields":{"path":"/docs/2.9.0.SNAPSHOT/applications/application-metadata/","version":"2.9.0.SNAPSHOT","category":"applications"},"frontmatter":{"title":"Application Metadata","description":"Create and use application properties metadata","path":"applications/application-metadata/","meta_title":null,"meta_description":null,"keywords":null}}}]},"page":{"html":"<h1 id=\"sftp-to-jdbc-file-ingest\" style=\"position:relative;\"><a href=\"#sftp-to-jdbc-file-ingest\" aria-label=\"sftp to jdbc file ingest permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SFTP to JDBC File Ingest</h1>\n<p>This recipe provides step by step instructions to build a Data Flow pipeline to ingest files from an SFTP source and save the contents to a JDBC data store.\nThe pipeline is designed to launch a task whenever a new file is detected by the SFTP source.\nIn this case, the task is a Spring Batch job that processes the file, converting the contents of each line to uppercase, and inserting it into a table.</p>\n<p>The <a href=\"https://github.com/spring-cloud/spring-cloud-dataflow-samples/tree/master/dataflow-website/recipes/file-ingest/file-to-jdbc\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">file ingest</a> batch job reads from a CSV text file with lines formatted as <code class=\"language-text\">first_name,last_name</code> and writes each entry to a database table by using a <a href=\"https://docs.spring.io/spring-batch/trunk/apidocs/org/springframework/batch/item/database/JdbcBatchItemWriter.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">JdbcBatchItemWriter</code></a>] that performs <code class=\"language-text\">INSERT INTO people (first_name, last_name) VALUES (:firstName, :lastName)</code> for each line.</p>\n<p>You can <a href=\"https://github.com/spring-cloud/spring-cloud-dataflow-samples/blob/master/dataflow-website/recipes/file-ingest/file-to-jdbc/file-to-jdbc.zip?raw=true\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">download the project</a> that contains the source code and sample data from your browser or from the command line:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">wget</span> https://github.com/spring-cloud/spring-cloud-dataflow-samples/blob/master/dataflow-website/recipes/file-ingest/file-to-jdbc/file-to-jdbc.zip?raw<span class=\"token operator\">=</span>true -O file-to-jdbc.zip</code></pre></div>\n      </div>\n<div class=\"admonition tip\"><p>If you choose not to build the task application yourself, the executable jar is published to the <a href=\"https://repo.spring.io/libs-snapshot-local/io/spring/cloud/dataflow/ingest/ingest/1.0.0.BUILD-SNAPSHOT/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Spring Maven repository</a> and to the <a href=\"https://hub.docker.com/r/springcloud/ingest/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">springcloud/ingest</a> Docker repository.</p></div>\n<p>The pipeline is built by using the following pre-packaged Spring Cloud Stream applications:</p>\n<ul>\n<li><a href=\"https://github.com/spring-cloud-stream-app-starters/sftp/tree/master/spring-cloud-starter-stream-source-sftp-dataflow\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">sftp-dataflow-source</a> is an SFTP source configured to emit a Task Launch Request whenever it detects a new file in one or more polled SFTP directories.</li>\n<li><a href=\"https://github.com/spring-cloud-stream-app-starters/tasklauncher-dataflow/tree/master/spring-cloud-starter-stream-sink-task-launcher-dataflow\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">dataflow-task-launcher-sink</a> is a sink that acts as a REST client to the Data Flow server to launch a Data Flow task.</li>\n</ul>\n<p>This pipeline runs on all supported Data Flow platforms.\nThe SFTP source downloads each file from the SFTP server to a local directory before sending the task launch request.\nThe request sets <code class=\"language-text\">localFilePath</code> as a command line argument for the task. When running on a cloud platform, we need to mount a shared directory available to the SFTP source container and the task container.\nFor this example, we set up an NFS mounted directory.\nConfiguring the environment and containers for NFS is platform-specific and is described here for Cloud Foundry v2.3+ and minikube.</p>\n<h2 id=\"prerequisites\" style=\"position:relative;\"><a href=\"#prerequisites\" aria-label=\"prerequisites permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisites</h2>\n<p>This section covers the set up and configuration steps you need to do before starting the batch application.</p>\n<h3 id=\"data-flow-installation\" style=\"position:relative;\"><a href=\"#data-flow-installation\" aria-label=\"data flow installation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Flow Installation</h3>\n<p>Make sure you have installed Spring Cloud Data Flow to the platform of your choice:</p>\n<ul>\n<li><a href=\"/docs/2.9.0.SNAPSHOT/installation/local/\">Local</a></li>\n<li><a href=\"/docs/2.9.0.SNAPSHOT/installation/cloudfoundry/\">Cloud Foundry</a></li>\n<li><a href=\"/docs/2.9.0.SNAPSHOT/installation/kubernetes/\">Kubernetes</a></li>\n</ul>\n<!-- TODO: Support for Postgres -->\n<div class=\"admonition note\"><p><strong>NOTE</strong>: For Kubernetes, the sample task application is configured to use MySQL. The Data Flow server must also be configured for MySQL.</p></div>\n<h3 id=\"using-data-flow\" style=\"position:relative;\"><a href=\"#using-data-flow\" aria-label=\"using data flow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using Data Flow</h3>\n<p>This example assumes that you know how to use Spring Cloud Data Flow to register and deploy applications by using the Spring Cloud Data Flow dashboard or the Spring Cloud Data Flow shell. If you need further instructions on using Data Flow see <a href=\"/docs/2.9.0.SNAPSHOT/stream-developer-guides/streams/data-flow-stream/\">Stream Processing by Using Spring Cloud Data Flow</a> and <a href=\"/docs/2.9.0.SNAPSHOT/batch-developer-guides/batch/data-flow-spring-batch/\">Register and Launch a Batch Application by Using Spring Cloud Data Flow</a>.</p>\n<h3 id=\"sftp-server\" style=\"position:relative;\"><a href=\"#sftp-server\" aria-label=\"sftp server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SFTP server</h3>\n<p>This example requires access to an SFTP server. For running on a <code class=\"language-text\">local</code> machine and <code class=\"language-text\">minikube</code>, we use the host machine as the SFTP server. For <code class=\"language-text\">Cloud Foundry</code>, and <code class=\"language-text\">Kubernetes</code> in general, an external SFTP server is required.\nOn the SFTP server, create a <code class=\"language-text\">/remote-files</code> directory. This is where we drop files to trigger the pipeline.</p>\n<h3 id=\"nfs-configuration\" style=\"position:relative;\"><a href=\"#nfs-configuration\" aria-label=\"nfs configuration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NFS configuration</h3>\n<div class=\"admonition tip\"><p>NFS is not required when running locally.</p></div>\n<h4 id=\"cloud-foundry-nfs-configuration\" style=\"position:relative;\"><a href=\"#cloud-foundry-nfs-configuration\" aria-label=\"cloud foundry nfs configuration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cloud Foundry NFS configuration</h4>\n<p>This feature is provided in Pivotal Cloud Foundry by <a href=\"https://docs.pivotal.io/pivotalcf/2-11/devguide/services/using-vol-services.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">NFS Volume Services</a></p>\n<p>To run this example, we need:</p>\n<ul>\n<li>A Cloud Foundry instance (v2.3+) with NFS Volume Services <a href=\"https://docs.pivotal.io/pivotalcf/2-11/opsguide/enable-vol-services.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">enabled</a></li>\n<li>An NFS server accessible from the Cloud Foundry instance</li>\n<li>A properly configured <code class=\"language-text\">nfs</code> service instance</li>\n</ul>\n<div class=\"admonition note\"><p><strong>NOTE:</strong> For simplicity, this example assumes the <code class=\"language-text\">nfs</code> service is created with common configuration as follows with a common mount point (<code class=\"language-text\">/var/scdf</code>) for all bound apps. You can also set these parameters when binding the NFS service to an application by using <a href=\"https://docs.spring.io/spring-cloud-dataflow/docs/current/reference/htmlsingle/#configure-service-binding-parameters\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">deployment propterties</a>:</p><div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">cf create-service nfs Existing nfs -c <span class=\"token string\">'{\"share\":&lt;nfs-host>/staging\",\"uid\":&lt;uid>,\"gid\":&lt;gid>, \"mount\":\"/var/scdf\"}'</span></code></pre></div>\n      </div></div>\n<h4 id=\"kubernetes-nfs-configuration\" style=\"position:relative;\"><a href=\"#kubernetes-nfs-configuration\" aria-label=\"kubernetes nfs configuration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes NFS configuration</h4>\n<p>Kubernetes provides many options for configuring and sharing persistent volumes. For this example, we use <code class=\"language-text\">minikube</code> and use the host machine as the NFS server. The following instructions works for <code class=\"language-text\">OS/X</code> and should be similar for Linux hosts:</p>\n<p>Make sure minikube is started. The commands in these instructions provide NFS access to the minikube VM. The minikube IP is subject to change each time it is started, so you should perform these steps after each start.</p>\n<p>Expose a shared directory called <code class=\"language-text\">/staging</code>.</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> /staging\n<span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> <span class=\"token number\">777</span> /staging\n<span class=\"token function\">sudo</span> <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"/staging -alldirs -mapall=\"</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">id</span> -u<span class=\"token variable\">)</span></span><span class=\"token string\">\":\"</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">id</span> -g<span class=\"token variable\">)</span></span><span class=\"token string\">\" <span class=\"token variable\"><span class=\"token variable\">$(</span>minikube <span class=\"token function\">ip</span><span class=\"token variable\">)</span></span>\"</span> <span class=\"token operator\">>></span> /etc/exports\n<span class=\"token function\">sudo</span> nfsd restart</code></pre></div>\n      </div>\n<p>Verify the NFS mounts:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">showmount -e <span class=\"token number\">127.0</span>.0.1\nExports list on <span class=\"token number\">127.0</span>.0.1:\n/staging <span class=\"token number\">192.168</span>.99.105</code></pre></div>\n      </div>\n<p>Configure persistent volume and persistent volume claim resources. Copy the following and save it to a file named <code class=\"language-text\">nfs-config.yml</code>:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PersistentVolume\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nfs<span class=\"token punctuation\">-</span>volume\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">capacity</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> 4Gi\n  <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ReadWriteMany\n  <span class=\"token key atrule\">persistentVolumeReclaimPolicy</span><span class=\"token punctuation\">:</span> Retain\n  <span class=\"token key atrule\">storageClassName</span><span class=\"token punctuation\">:</span> standard\n  <span class=\"token key atrule\">nfs</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># The address 192.168.99.1 is the Minikube gateway to the host for VirtualBox. This way</span>\n    <span class=\"token comment\"># not the container IP will be visible by the NFS server on the host machine,</span>\n    <span class=\"token comment\"># but the IP address of the `minikube ip` command. You will need to</span>\n    <span class=\"token comment\"># grant access to the `minikube ip` IP address.</span>\n    <span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span> 192.168.99.1\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'/staging'</span>\n\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> PersistentVolumeClaim\n<span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nfs<span class=\"token punctuation\">-</span>volume<span class=\"token punctuation\">-</span>claim\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> default\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">storageClassName</span><span class=\"token punctuation\">:</span> standard\n  <span class=\"token key atrule\">accessModes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ReadWriteMany\n  <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">requests</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">storage</span><span class=\"token punctuation\">:</span> 4Gi</code></pre></div>\n      </div>\n<p>Create the resources:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl apply -f nfs-config.yml</code></pre></div>\n      </div>\n<h2 id=\"deployment\" style=\"position:relative;\"><a href=\"#deployment\" aria-label=\"deployment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deployment</h2>\n<p>This section addresses how to deploy to the following environments:</p>\n<ul>\n<li>Local</li>\n<li>Cloud Foundry</li>\n<li>Kubernetes</li>\n</ul>\n<h3 id=\"local\" style=\"position:relative;\"><a href=\"#local\" aria-label=\"local permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Local</h3>\n<p>For local deployment, this example uses Kafka as the message broker.\nCreate directories for the remote and local files:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p /tmp/remote-files /tmp/local-files</code></pre></div>\n      </div>\n<h4 id=\"register-the-applications\" style=\"position:relative;\"><a href=\"#register-the-applications\" aria-label=\"register the applications permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Register the Applications</h4>\n<p>If you downloaded and built the <a href=\"https://github.com/spring-cloud/spring-cloud-dataflow-samples/blob/master/dataflow-website/recipes/file-ingest/file-to-jdbc/file-to-jdbc.zip?raw=true\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">sample project</a>, you can register it by using a <code class=\"language-text\">file://</code> URL. e.g. <code class=\"language-text\">file://&lt;path-to-project>/target/ingest-1.0.0-SNAPSHOT.jar</code>\nOtherwise, you can use the published Maven jar:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">app register --name fileIngest --type task --uri maven://io.spring.cloud.dataflow.ingest:ingest:1.0.0.BUILD-SNAPSHOT</code></pre></div>\n      </div>\n<p>Register the prepackaged <code class=\"language-text\">sftp</code> source and <code class=\"language-text\">task-launcher</code> sink applications:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">app register --name <span class=\"token function\">sftp</span> --type <span class=\"token builtin class-name\">source</span>  --uri maven://org.springframework.cloud.stream.app:sftp-dataflow-source-kafka:2.1.0.RELEASE</code></pre></div>\n      </div>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">app register --name task-launcher --type sink --uri maven://org.springframework.cloud.stream.app:task-launcher-dataflow-sink-kafka:1.0.1.RELEASE</code></pre></div>\n      </div>\n<h4 id=\"create-the-task\" style=\"position:relative;\"><a href=\"#create-the-task\" aria-label=\"create the task permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create the Task</h4>\n<p>To create the task, run the following command:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">task create fileIngestTask --definition fileIngest</code></pre></div>\n      </div>\n<h4 id=\"create-and-deploy-the-stream\" style=\"position:relative;\"><a href=\"#create-and-deploy-the-stream\" aria-label=\"create and deploy the stream permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create and Deploy the Stream</h4>\n<p>To create and deploy the stream, run the following command:</p>\n<div class=\"admonition note\"><p><strong>NOTE</strong>: Replace <code class=\"language-text\">&lt;user></code> and <code class=\"language-text\">&lt;pass></code>.\nThe <code class=\"language-text\">username</code> and <code class=\"language-text\">password</code> are the credentials for the local (or remote) user.\nIf you do not use a local SFTP server, specify the host by setting the <code class=\"language-text\">host</code> parameter\n(and, optionally, the <code class=\"language-text\">port</code> parameter). If not defined, <code class=\"language-text\">host</code> defaults to <code class=\"language-text\">127.0.0.1</code>\nand <code class=\"language-text\">port</code> defaults to <code class=\"language-text\">22</code>.</p></div>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">stream create --name inboundSftp --definition <span class=\"token string\">\"sftp --username=&lt;user> --password=&lt;pass> --allow-unknown-keys=true --task.launch.request.taskName=fileIngestTask --remote-dir=/tmp/remote-files/ --local-dir=/tmp/local-files/ | task-launcher\"</span> --deploy</code></pre></div>\n      </div>\n<div class=\"admonition tip\"><p>The <a href=\"https://github.com/spring-cloud-stream-app-starters/tasklauncher-dataflow/tree/master/spring-cloud-starter-stream-sink-task-launcher-dataflow\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">dataflow-task-launcher-sink</a> uses a <a href=\"https://docs.spring.io/spring-cloud-stream/docs/Elmhurst.BUILD-SNAPSHOT/api/org/springframework/cloud/stream/binder/PollableMessageSource.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">PollableMessageSource</code></a> controlled by a dynamic trigger with exponential backoff. By default, the sink polls its input destination every second. If there are no task launch requests, the polling period continues to double up to a maximum of 30 seconds. If a task launch request is present, the trigger resets to one second. You can continue the trigger parameters by setting the <code class=\"language-text\">task-launcher</code> sink properties, <code class=\"language-text\">trigger.period</code> and <code class=\"language-text\">trigger.max-period</code>, in the stream definition.</p></div>\n<h4 id=\"verify-stream-deployment\" style=\"position:relative;\"><a href=\"#verify-stream-deployment\" aria-label=\"verify stream deployment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verify Stream deployment</h4>\n<p>We can see the status of the streams to be deployed with <code class=\"language-text\">stream list</code>, as the following example shows:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dataflow:<span class=\"token operator\">></span>stream list\n\nStream Name                                                         Stream Definition                                                                     Status           \n\ninboundSftpsftp --password<span class=\"token operator\">=</span><span class=\"token string\">'******'</span> --remote-dir<span class=\"token operator\">=</span>/tmp/remote-files/ --local-dir<span class=\"token operator\">=</span>/tmp/local-files/ --task.launch.request.taskName<span class=\"token operator\">=</span>fileIngestTaskThe stream has been         \n           --allow-unknown-keys<span class=\"token operator\">=</span>true --username<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>user<span class=\"token operator\">></span> <span class=\"token operator\">|</span> task-launcher                                                                         successfully deployed       \n</code></pre></div>\n      </div>\n<h4 id=\"inspect-the-application-logs\" style=\"position:relative;\"><a href=\"#inspect-the-application-logs\" aria-label=\"inspect the application logs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inspect the Application Logs</h4>\n<p>In the event the stream failed to deploy or you would like to inspect the logs for any reason, you can get the location of the logs to applications created for the <code class=\"language-text\">inboundSftp</code> stream by using the <code class=\"language-text\">runtime apps</code> command, as follows:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dataflow:<span class=\"token operator\">></span>runtime apps\n\n   App Id / Instance Id    Unit Status                                                                     No. of Instances / Attributes                                                                      \n\ninboundSftp.sftp            deployed                                                                                     <span class=\"token number\">1</span>                                                                                    \n                                             guid <span class=\"token operator\">=</span> <span class=\"token number\">23057</span>                                                                                                                                                     \n                                              pid <span class=\"token operator\">=</span> <span class=\"token number\">71927</span>                                                                                                                                                     \n                                             port <span class=\"token operator\">=</span> <span class=\"token number\">23057</span>                                                                                                                                                     \n\ninboundSftp.sftp-0          deployed       stderr <span class=\"token operator\">=</span> /var/folders/hd/5yqz2v2d3sxd3n879f4sg4gr0000gn/T/spring-cloud-deployer-120915912946760306/inboundSftp-1540821009913/inboundSftp.sftp/stderr_0.log         \n                                           stdout <span class=\"token operator\">=</span> /var/folders/hd/5yqz2v2d3sxd3n879f4sg4gr0000gn/T/spring-cloud-deployer-120915912946760306/inboundSftp-1540821009913/inboundSftp.sftp/stdout_0.log         \n                                              url <span class=\"token operator\">=</span> http://192.168.64.1:23057                                                                                                                                 \n                                      working.dir <span class=\"token operator\">=</span> /var/folders/hd/5yqz2v2d3sxd3n879f4sg4gr0000gn/T/spring-cloud-deployer-120915912946760306/inboundSftp-1540821009913/inboundSftp.sftp                      \n\ninboundSftp.task-launcher   deployed                                                                                     <span class=\"token number\">1</span>                                                                                    \n\n                                             guid <span class=\"token operator\">=</span> <span class=\"token number\">60081</span>                                                                                                                                                     \n                                              pid <span class=\"token operator\">=</span> <span class=\"token number\">71926</span>                                                                                                                                                     \n                                             port <span class=\"token operator\">=</span> <span class=\"token number\">60081</span>                                                                                                                                                     \ninboundSftp.task-launcher-0 deployed       stderr <span class=\"token operator\">=</span> /var/folders/hd/5yqz2v2d3sxd3n879f4sg4gr0000gn/T/spring-cloud-deployer-120915912946760306/inboundSftp-1540820991695/inboundSftp.task-launcher/stderr_0.log\n                                           stdout <span class=\"token operator\">=</span> /var/folders/hd/5yqz2v2d3sxd3n879f4sg4gr0000gn/T/spring-cloud-deployer-120915912946760306/inboundSftp-1540820991695/inboundSftp.task-launcher/stdout_0.log\n                                              url <span class=\"token operator\">=</span> http://192.168.64.1:60081                                                                                                                                 \n                                      working.dir <span class=\"token operator\">=</span> /var/folders/hd/5yqz2v2d3sxd3n879f4sg4gr0000gn/T/spring-cloud-deployer-120915912946760306/inboundSftp-1540820991695/inboundSftp.task-launcher             \n</code></pre></div>\n      </div>\n<h4 id=\"copying-a-file-into-the-remote-directory\" style=\"position:relative;\"><a href=\"#copying-a-file-into-the-remote-directory\" aria-label=\"copying a file into the remote directory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Copying a File into the Remote Directory</h4>\n<p>Normally, data would be uploaded to an SFTP server.\nWe simulate this by copying a file into the directory specified by <code class=\"language-text\">--remote-dir</code>.\nYou can find sample data in the <code class=\"language-text\">data/</code> directory of the <a href=\"https://github.com/spring-cloud/spring-cloud-dataflow-samples/blob/master/dataflow-website/recipes/file-ingest/file-to-jdbc/file-to-jdbc.zip?raw=true\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">sample project</a>.</p>\n<p>Copy <code class=\"language-text\">data/name-list.csv</code> into the <code class=\"language-text\">/tmp/remote-files</code> directory, which the SFTP source is monitoring.\nWhen this file is detected, the <code class=\"language-text\">sftp</code> source downloads it to the <code class=\"language-text\">/tmp/local-files</code> directory specified by <code class=\"language-text\">--local-dir</code>, and emits a task launch request.\nThe task launch request includes the name of the task to launch along with the local file path, given as a command line argument.\nSpring Batch binds each command line argument to a corresponding <code class=\"language-text\">JobParameter</code>.\nThe <code class=\"language-text\">FileIngestTask</code> job processes the file given by the <code class=\"language-text\">JobParameter</code> named <code class=\"language-text\">localFilePath</code>.\nSince there have not been any recent requests, the task launches within 30 seconds after the request is published (see the earlier tip above about configuring the launch trigger).</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cp</span> data/name-list.csv /tmp/remote-files</code></pre></div>\n      </div>\n<p>When the batch job launches, you see something like this in the SCDF console log:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token number\">2018</span>-10-26 <span class=\"token number\">16</span>:47:24.879  INFO <span class=\"token number\">86034</span> --- <span class=\"token punctuation\">[</span>nio-9393-exec-7<span class=\"token punctuation\">]</span> o.s.c.d.spi.local.LocalTaskLauncher      <span class=\"token builtin class-name\">:</span> Command to be executed: /Library/Java/JavaVirtualMachines/jdk1.8.0_60.jdk/Contents/Home/jre/bin/java -jar <span class=\"token operator\">&lt;</span>path-to<span class=\"token operator\">></span>/batch/file-ingest/target/ingest-1.0.0.jar <span class=\"token assign-left variable\">localFilePath</span><span class=\"token operator\">=</span>/tmp/local-files/name-list.csv --spring.cloud.task.executionid<span class=\"token operator\">=</span><span class=\"token number\">1</span>\n<span class=\"token number\">2018</span>-10-26 <span class=\"token number\">16</span>:47:25.100  INFO <span class=\"token number\">86034</span> --- <span class=\"token punctuation\">[</span>nio-9393-exec-7<span class=\"token punctuation\">]</span> o.s.c.d.spi.local.LocalTaskLauncher      <span class=\"token builtin class-name\">:</span> launching task fileIngestTask-8852d94d-9dd8-4760-b0e4-90f75ee028de\n   Logs will be <span class=\"token keyword\">in</span> /var/folders/hd/5yqz2v2d3sxd3n879f4sg4gr0000gn/T/fileIngestTask3100511340216074735/1540586844871/fileIngestTask-8852d94d-9dd8-4760-b0e4-90f75ee028de</code></pre></div>\n      </div>\n<h4 id=\"inspect-job-executions\" style=\"position:relative;\"><a href=\"#inspect-job-executions\" aria-label=\"inspect job executions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inspect Job Executions</h4>\n<p>After data is received and the batch job runs, it is recorded as a job execution. We can view job executions by, for example, issuing the following command in the Spring Cloud Data Flow shell:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dataflow:<span class=\"token operator\">></span>job execution list\n\nID Task IDJob Name          Start Time         Step Execution Count Definition Status \n\n1  1      ingestJobTue May 01 <span class=\"token number\">23</span>:34:05 EDT <span class=\"token number\">2018</span>1                    Created           \n</code></pre></div>\n      </div>\n<p>We can also list more details about that specific job execution:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dataflow:<span class=\"token operator\">></span>job execution display --id <span class=\"token number\">1</span>\n\n                  Key                              Value             \n\nJob Execution Id                       1                             \nTask Execution Id                      1                             \nTask Instance Id                       1                             \nJob Name                               ingestJob                     \nCreate Time                            Fri Oct <span class=\"token number\">26</span> <span class=\"token number\">16</span>:57:51 EDT <span class=\"token number\">2018</span>  \nStart Time                             Fri Oct <span class=\"token number\">26</span> <span class=\"token number\">16</span>:57:51 EDT <span class=\"token number\">2018</span>  \nEnd Time                               Fri Oct <span class=\"token number\">26</span> <span class=\"token number\">16</span>:57:53 EDT <span class=\"token number\">2018</span>  \nRunning                                false                         \nStopping                               false                         \nStep Execution Count                   1                             \nExecution Status                       COMPLETED                     \nExit Status                            COMPLETED                     \nExit Message                                                         \nDefinition Status                      Created                       \nJob Parameters                                                       \n-spring.cloud.task.executionid<span class=\"token punctuation\">(</span>STRING<span class=\"token punctuation\">)</span> 1                             \nrun.id<span class=\"token punctuation\">(</span>LONG<span class=\"token punctuation\">)</span>                           1                             \nlocalFilePath<span class=\"token punctuation\">(</span>STRING<span class=\"token punctuation\">)</span>                  /tmp/local-files/name-list.csv\n</code></pre></div>\n      </div>\n<h4 id=\"verify-data\" style=\"position:relative;\"><a href=\"#verify-data\" aria-label=\"verify data permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verify Data</h4>\n<p>When the the batch job runs, it processes the file in the local directory (<code class=\"language-text\">/tmp/local-files</code>), transforms each item to uppercase names, and inserts it into the database.</p>\n<p>You can use any database tool that supports the H2 database to inspect the data.\nIn this example, we use the DBeaver database tool.\nWe can inspect the table to ensure our data was processed correctly.</p>\n<p>Within DBeaver, create a connection to the database by using the JDBC URL <code class=\"language-text\">jdbc:h2:tcp://localhost:19092/mem:dataflow</code> and user <code class=\"language-text\">sa</code> with no password.\nWhen connected, expand the <code class=\"language-text\">PUBLIC</code> schema, expand <code class=\"language-text\">Tables</code>, and double click on the <code class=\"language-text\">PEOPLE</code> table.\nWhen the table data loads, click the <strong>Data</strong> tab to view the data.</p>\n<h3 id=\"cloud-foundry\" style=\"position:relative;\"><a href=\"#cloud-foundry\" aria-label=\"cloud foundry permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cloud Foundry</h3>\n<p>This section describes how to set up Spring Batch and Spring Cloud Data Flow on Cloud Foundry and then create our example batch process.</p>\n<h4 id=\"prerequisites-1\" style=\"position:relative;\"><a href=\"#prerequisites-1\" aria-label=\"prerequisites 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisites</h4>\n<p>Running this example on Cloud Foundry requires:</p>\n<ul>\n<li>Configuring an NFS server and creating an <code class=\"language-text\">nfs</code> service to access it as described in the <a href=\"/docs/2.9.0.SNAPSHOT/recipes/batch/sftp-to-jdbc/#cloud-foundry-nfs-configuration\">Cloud Foundry NFS Configuration</a> section.</li>\n<li>An external SFTP server with a <code class=\"language-text\">/remote-files</code> directory.</li>\n<li>A <code class=\"language-text\">mysql</code> service instance</li>\n<li>A <code class=\"language-text\">rabbit</code> service instance</li>\n<li><a href=\"https://github.com/pivotal-cf/PivotalMySQLWeb\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">PivotalMySQLWeb</a> or another database tool to view the data</li>\n</ul>\n<h4 id=\"register-the-applications-1\" style=\"position:relative;\"><a href=\"#register-the-applications-1\" aria-label=\"register the applications 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Register the Applications</h4>\n<p>To register the applications, run the following command:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">app register --name fileIngest --type task --uri maven://io.spring.cloud.dataflow.ingest:ingest:1.0.0.BUILD-SNAPSHOT</code></pre></div>\n      </div>\n<p>Then register the prepackaged <code class=\"language-text\">sftp</code> source and <code class=\"language-text\">task-launcher</code> sink applications:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">app register --name <span class=\"token function\">sftp</span> --type <span class=\"token builtin class-name\">source</span>  --uri maven://org.springframework.cloud.stream.app:sftp-dataflow-source-kafka:2.1.0.RELEASE</code></pre></div>\n      </div>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">app register --name task-launcher --type sink --uri maven://org.springframework.cloud.stream.app:task-launcher-dataflow-sink-kafka:1.0.1.RELEASE</code></pre></div>\n      </div>\n<h4 id=\"create-the-task-1\" style=\"position:relative;\"><a href=\"#create-the-task-1\" aria-label=\"create the task 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create the Task</h4>\n<p>To creat the task, run the following command:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">task create fileIngestTask --definition fileIngest</code></pre></div>\n      </div>\n<h4 id=\"create-the-stream\" style=\"position:relative;\"><a href=\"#create-the-stream\" aria-label=\"create the stream permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create the Stream</h4>\n<p>The <code class=\"language-text\">sftp</code> source is configured to publish a task launch request that launches the <code class=\"language-text\">fileIngestTask</code> task.\nThe launch request binds the <code class=\"language-text\">nfs</code> service to the task container by using deployment properties <code class=\"language-text\">task.launch.request.deployment-properties=deployer.*.cloudfoundry.services=nfs</code>.</p>\n<div class=\"admonition note\"><p><strong>NOTE</strong>: Replace <code class=\"language-text\">&lt;user></code>, <code class=\"language-text\">&lt;pass></code>,<code class=\"language-text\">&lt;host></code> and <code class=\"language-text\">&lt;data-flow-server-uri></code> in the following stream definition.</p></div>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">stream create --name inboundSftp --definition <span class=\"token string\">\"sftp --username=&lt;user> --password=&lt;pass> --host=&lt;host>  --allow-unknown-keys=true --remote-dir=/remote-files/ --local-dir=/var/scdf/shared-files/ --task.launch.request.taskName=fileIngestTask --task.launch.request.deployment-properties=deployer.*.cloudfoundry.services=nfs | task-launcher --spring.cloud.dataflow.client.server-uri=&lt;data-flow-server-uri>\"</span></code></pre></div>\n      </div>\n<div class=\"admonition tip\"><p>The <a href=\"https://github.com/spring-cloud-stream-app-starters/tasklauncher-dataflow/tree/master/spring-cloud-starter-stream-sink-task-launcher-dataflow\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">dataflow-task-launcher-sink</a> uses a <a href=\"https://docs.spring.io/spring-cloud-stream/docs/Elmhurst.BUILD-SNAPSHOT/api/org/springframework/cloud/stream/binder/PollableMessageSource.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">PollableMessageSource</code></a> controlled by a dynamic trigger with exponential backoff. By default, the sink polls its input destination every 1 second. If there are no task launch requests, the polling period continues to double, to a maximum of 30 seconds. If a task launch request is present, the trigger resets to 1 second. You can configure the trigger parameters by setting the <code class=\"language-text\">task-launcher</code> sink properties, <code class=\"language-text\">trigger.period</code> and <code class=\"language-text\">trigger.max-period</code>, in the stream definition.</p></div>\n<h4 id=\"deploy-the-stream\" style=\"position:relative;\"><a href=\"#deploy-the-stream\" aria-label=\"deploy the stream permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy the stream</h4>\n<p>When we deploy the stream, we must also configure the <code class=\"language-text\">sftp</code> pod by running the following command:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">stream deploy inboundSftp --properties <span class=\"token string\">\"deployer.sftp.cloudfoundry.services=nfs\"</span></code></pre></div>\n      </div>\n<h4 id=\"verify-stream-deployment-1\" style=\"position:relative;\"><a href=\"#verify-stream-deployment-1\" aria-label=\"verify stream deployment 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verify Stream Deployment</h4>\n<p>We can see the status of the streams to be deployed with <code class=\"language-text\">stream list</code>, as the following example shows:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dataflow:<span class=\"token operator\">></span>stream list\n\nStream Name                                                                                     Stream Definition                                                                                           Status       \n\ninboundSftpsftp --task.launch.request.deployment-properties<span class=\"token operator\">=</span><span class=\"token string\">'deployer.*.cloudfoundry.services=nfs'</span> --sftp.factory.password<span class=\"token operator\">=</span><span class=\"token string\">'******'</span> --sftp.local-dir<span class=\"token operator\">=</span>/var/scdf/shared-files/                          The stream has been\n           --sftp.factory.allow-unknown-keys<span class=\"token operator\">=</span>true --sftp.factory.username<span class=\"token operator\">=</span><span class=\"token string\">'******'</span> --sftp.remote-dir<span class=\"token operator\">=</span>/remote-files/ --sftp.factory.host<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>host<span class=\"token operator\">></span> --task.launch.request.taskName<span class=\"token operator\">=</span>fileIngestTask <span class=\"token operator\">|</span>        successfully       \n           task-launcher --spring.cloud.dataflow.client.server-uri<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>data-flow-server-uri                                                                                                              deployed           \n</code></pre></div>\n      </div>\n<h4 id=\"inspect-the-application-logs-1\" style=\"position:relative;\"><a href=\"#inspect-the-application-logs-1\" aria-label=\"inspect the application logs 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inspect the Application Logs</h4>\n<p>Use the Cloud Foundry CLI to list the apps. The <code class=\"language-text\">source</code> and <code class=\"language-text\">sink</code> applications should be in a started state.</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">cf apps\nGetting apps <span class=\"token keyword\">in</span> org myorg / space myspace as someuser<span class=\"token punctuation\">..</span>.\nOK\n\nname                                   requested state   instances   memory   disk   urls\n<span class=\"token punctuation\">..</span>.\nKy7Uk6q-inboundSftp-sftp-v1            started           <span class=\"token number\">1</span>/1         2G       1G     Ky7Uk6q-inboundSftp-sftp-v1.apps.hayward.cf-app.com\nKy7Uk6q-inboundSftp-task-launcher-v1   started           <span class=\"token number\">1</span>/1         2G       1G     Ky7Uk6q-inboundSftp-task-launcher-v1.apps.hayward.cf-app.com\n<span class=\"token punctuation\">..</span>.</code></pre></div>\n      </div>\n<p>The log files of the <code class=\"language-text\">sftp</code> source would be useful to debug issues such as SFTP connection failures and to verify SFTP downloads. To view the logs, run the following command:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">cf logs Ky7Uk6q-inboundSftp-sftp-v1 --recent</code></pre></div>\n      </div>\n<p>The logs for the <code class=\"language-text\">task-launcher</code> application would also be useful to debug data flow connection issues and verify task launch requests:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">cf logs Ky7Uk6q-inboundSftp-task-launcher-v1 --recent</code></pre></div>\n      </div>\n<h4 id=\"copy-a-file-into-the-remote-directory\" style=\"position:relative;\"><a href=\"#copy-a-file-into-the-remote-directory\" aria-label=\"copy a file into the remote directory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Copy a File into the Remote Directory</h4>\n<p>You can find sample data in the <code class=\"language-text\">data/</code> directory of the <a href=\"https://github.com/spring-cloud/spring-cloud-dataflow-samples/blob/master/dataflow-website/recipes/file-ingest/file-to-jdbc/file-to-jdbc.zip?raw=true\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">sample project</a>.</p>\n<p>Connect to the SFTP server and upload <code class=\"language-text\">data/name-list.csv</code> into the <code class=\"language-text\">remote-files</code> directory.</p>\n<p>When this file is detected, the <code class=\"language-text\">sftp</code> source downloads it to the <code class=\"language-text\">/var/scdf/shared-files</code> directory specified by <code class=\"language-text\">--local-dir</code>. We use the <code class=\"language-text\">/var/scdf</code> shared mount path that we configured for the <code class=\"language-text\">nfs</code> service. When the file is downloaded, the source emits a task launch request.\nThe task launch request includes the name of the task to launch along with the local file path, given as a command line argument.\nSpring Batch binds each command line argument to a corresponding <code class=\"language-text\">JobParameter</code>.\nThe <code class=\"language-text\">FileIngestTask</code> job processes the file given by the <code class=\"language-text\">JobParameter</code> named <code class=\"language-text\">localFilePath</code>.\nSince there have not been any recent requests, the task launches within 30 seconds after the request is published (see the earlier tip about configuring the launch trigger).</p>\n<h4 id=\"inspect-job-executions-1\" style=\"position:relative;\"><a href=\"#inspect-job-executions-1\" aria-label=\"inspect job executions 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inspect Job Executions</h4>\n<p>To inspect job inspections, run the following command (shown with its output):</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dataflow:<span class=\"token operator\">></span>job execution list\n\nID Task IDJob Name          Start Time         Step Execution Count Definition Status \n\n1  1      ingestJobTue Jun <span class=\"token number\">11</span> <span class=\"token number\">15</span>:56:27 EDT <span class=\"token number\">2019</span>1                    Created           \n</code></pre></div>\n      </div>\n<p>We can also list more details about that specific job execution:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dataflow:<span class=\"token operator\">></span>job execution display --id <span class=\"token number\">1</span>\n\n                  Key                                 Value                \n\nJob Execution Id                       6                                   \nTask Execution Id                      6                                   \nTask Instance Id                       6                                   \nJob Name                               ingestJob                           \nCreate Time                            Thu Jun <span class=\"token number\">13</span> <span class=\"token number\">17</span>:06:28 EDT <span class=\"token number\">2019</span>        \nStart Time                             Thu Jun <span class=\"token number\">13</span> <span class=\"token number\">17</span>:06:29 EDT <span class=\"token number\">2019</span>        \nEnd Time                               Thu Jun <span class=\"token number\">13</span> <span class=\"token number\">17</span>:06:57 EDT <span class=\"token number\">2019</span>        \nRunning                                false                               \nStopping                               false                               \nStep Execution Count                   1                                   \nExecution Status                       COMPLETED                           \nExit Status                            COMPLETED                           \nExit Message                                                               \nDefinition Status                      Created                             \nJob Parameters                                                             \n-spring.cloud.task.executionid<span class=\"token punctuation\">(</span>STRING<span class=\"token punctuation\">)</span> 1                                   \nrun.id<span class=\"token punctuation\">(</span>LONG<span class=\"token punctuation\">)</span>                           1                                   \nlocalFilePath<span class=\"token punctuation\">(</span>STRING<span class=\"token punctuation\">)</span>                  /var/scdf/shared-files/name-list.csv\n</code></pre></div>\n      </div>\n<h4 id=\"verify-data-1\" style=\"position:relative;\"><a href=\"#verify-data-1\" aria-label=\"verify data 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verify Data</h4>\n<p>When the the batch job runs, it processes the file in the local directory (<code class=\"language-text\">/var/scdf/shared-files</code>), transforms each item to uppercase names, and inserts it into the database.</p>\n<p>Use <a href=\"https://github.com/pivotal-cf/PivotalMySQLWeb\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">PivotalMySQLWeb</a> to inspect the data.</p>\n<h3 id=\"kubernetes\" style=\"position:relative;\"><a href=\"#kubernetes\" aria-label=\"kubernetes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes</h3>\n<p>This section describes how to set up Spring Batch and Spring Cloud Data Flow on Kubernetes and then create our example batch process.</p>\n<h4 id=\"prerequisites-2\" style=\"position:relative;\"><a href=\"#prerequisites-2\" aria-label=\"prerequisites 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisites</h4>\n<p>This example assumes Data Flow is installed on Minikube with Kafka and MySQL. We recommend using the <a href=\"/docs/2.9.0.SNAPSHOT/installation/kubernetes/helm/\">Helm chart</a>. To get started, run the following command:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">helm <span class=\"token function\">install</span> --name my-release --set kafka.enabled<span class=\"token operator\">=</span>true,rabbitmq.enabled<span class=\"token operator\">=</span>false,server.service.type<span class=\"token operator\">=</span>NodePort stable/spring-cloud-data-flow</code></pre></div>\n      </div>\n<p>Running this example on Kubernetes requires configuring an NFS server and creating a corresponding <code class=\"language-text\">persistent volume</code> and <code class=\"language-text\">persistent volume claim</code> resources, as described in the <a href=\"/docs/2.9.0.SNAPSHOT/recipes/batch/sftp-to-jdbc/#kubernetes-nfs-configuration\">Kubernetes NFS Configuration</a> section.\nWe also require an external SFTP server with a <code class=\"language-text\">/remote-files</code> directory.</p>\n<h4 id=\"register-the-applications-2\" style=\"position:relative;\"><a href=\"#register-the-applications-2\" aria-label=\"register the applications 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Register the Applications</h4>\n<p>If you downloaded the <a href=\"https://github.com/spring-cloud/spring-cloud-dataflow-samples/blob/master/dataflow-website/recipes/file-ingest/file-to-jdbc/file-to-jdbc.zip?raw=true\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">sample project</a>, you can build and publish the Docker image to the Minikube registry:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">eval</span> <span class=\"token variable\"><span class=\"token variable\">$(</span>minikube docker-env<span class=\"token variable\">)</span></span>\n./mvnw clean package docker:build -Pkubernetes</code></pre></div>\n      </div>\n<p>Otherwise, you can skip this step to pull the image from Dockerhub:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">app register --name fileIngest --type task --uri docker://springcloud/ingest</code></pre></div>\n      </div>\n<p>Register the prepackaged <code class=\"language-text\">sftp</code> source and <code class=\"language-text\">task-launcher</code> sink applications:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">app register --name <span class=\"token function\">sftp</span> --type <span class=\"token builtin class-name\">source</span>  --uri docker://springcloudstream/sftp-dataflow-source-kafka:2.1.0.RELEASE --metadata-uri maven://org.springframework.cloud.stream.app:sftp-dataflow-source-kafka:jar:metadata:2.1.0.RELEASE</code></pre></div>\n      </div>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">app register --name task-launcher --type sink --uri docker://springcloudstream/task-launcher-dataflow-sink-kafka:1.0.1.RELEASE --metadata-uri maven://org.springframework.cloud.stream.app:task-launcher-dataflow-sink-kafka:jar:metadata:1.0.1.RELEASE</code></pre></div>\n      </div>\n<h4 id=\"create-the-task-2\" style=\"position:relative;\"><a href=\"#create-the-task-2\" aria-label=\"create the task 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create the Task</h4>\n<p>To create the task, run the following command:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">task create fileIngestTask --definition fileIngest</code></pre></div>\n      </div>\n<h4 id=\"create-the-stream-1\" style=\"position:relative;\"><a href=\"#create-the-stream-1\" aria-label=\"create the stream 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create the Stream</h4>\n<p>The <code class=\"language-text\">sftp</code> source is configured to publish a task launch request to launch the <code class=\"language-text\">fileIngestTask</code> task.\nThe launch request mounts the NFS share to the task pod by using the\n<code class=\"language-text\">deployer.*.kubernetes.volumes=[{'name':'staging','persistentVolumeClaim':{'claimName':'nfs-volume-claim'}}]</code> and\n<code class=\"language-text\">deployer.*.kubernetes.volumeMounts=[{'mountPath':'/staging/shared-files','name':'staging'}]</code> deployment properties.</p>\n<div class=\"admonition note\"><p><strong>NOTE</strong>: Replace <code class=\"language-text\">&lt;user></code>, <code class=\"language-text\">&lt;pass></code>, and <code class=\"language-text\">&lt;data-flow-server-uri></code> in the following stream definition. The <code class=\"language-text\">&lt;host></code> value here is the default Minikube gateway for VirtualBox.</p></div>\n<p>To get the <code class=\"language-text\">&lt;data-flow-server-uri></code> find the name of the service and use the <code class=\"language-text\">minikube service</code> command:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash:\"><pre class=\"language-bash:\"><code class=\"language-bash:\">kubectl get svc\n...\nmy-release-data-flow-server     NodePort       10.97.74.123     &lt;none&gt;        80:30826/TCP\n\nminikube service my-release-data-flow-server --url\nhttp://192.168.99.105:30826</code></pre></div>\n      </div>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">stream create inboundSftp --definition <span class=\"token string\">\"sftp --host=192.168.99.1 --username=&lt;user> --password=&lt;pass> --allow-unknown-keys=true --remote-dir=/remote-files --local-dir=/staging/shared-files --task.launch.request.taskName=fileIngestTask --task.launch.request.deployment-properties=deployer.*.kubernetes.volumes=[{'name':'staging','persistentVolumeClaim':{'claimName':'nfs-volume-claim'}}],deployer.*.kubernetes.volumeMounts=[{'mountPath':'/staging/shared-files','name':'staging'}] | task-launcher --spring.cloud.dataflow.client.server-uri=&lt;dataflow-uri>\"</span></code></pre></div>\n      </div>\n<div class=\"admonition tip\"><p>The <a href=\"https://github.com/spring-cloud-stream-app-starters/tasklauncher-dataflow/tree/master/spring-cloud-starter-stream-sink-task-launcher-dataflow\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">dataflow-task-launcher-sink</a> uses a <a href=\"https://docs.spring.io/spring-cloud-stream/docs/Elmhurst.BUILD-SNAPSHOT/api/org/springframework/cloud/stream/binder/PollableMessageSource.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">PollableMessageSource</code></a> controlled by a dynamic trigger with exponential backoff. By default, the sink polls its input destination every second. If there are no task launch requests, the polling period continue to double, to a maximum of 30 seconds. If a task launch request is present, the trigger resets to one second. You can configure the trigger parameters by setting the <code class=\"language-text\">task-launcher</code> sink properties, <code class=\"language-text\">trigger.period</code> and <code class=\"language-text\">trigger.max-period</code>, in the stream definition.</p></div>\n<h4 id=\"deploy-the-stream-1\" style=\"position:relative;\"><a href=\"#deploy-the-stream-1\" aria-label=\"deploy the stream 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy the Stream</h4>\n<p>When we deploy the stream, we must also configure a volume mount for the <code class=\"language-text\">sftp</code> source.</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">stream deploy inboundSftp --properties <span class=\"token string\">\"deployer.sftp.kubernetes.volumes=[{'name':'staging','persistentVolumeClaim':{'claimName':'nfs-volume-claim'}}],deployer.sftp.kubernetes.volumeMounts=[{'mountPath':'/staging/shared-files','name':'staging'}]\"</span></code></pre></div>\n      </div>\n<h4 id=\"verify-stream-deployment-2\" style=\"position:relative;\"><a href=\"#verify-stream-deployment-2\" aria-label=\"verify stream deployment 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verify Stream deployment</h4>\n<p>We can see the status of the streams to be deployed with <code class=\"language-text\">stream list</code>, as the following example shows:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dataflow:<span class=\"token operator\">></span>stream list\n\nStream Name                                                                                                                  Stream Definition                                                                                                                     Status   \n\ninboundSftpsftp                                                                                                                                                                                                                                                 The stream  \n           --task.launch.request.deployment-properties<span class=\"token operator\">=</span><span class=\"token string\">\"deployer.*.kubernetes.volumes=[{'name':'staging','persistentVolumeClaim':{'claimName':'nfs-volume-claim'}}],deployer.*.kubernetes.volumeMounts=[{'mountPath':'/staging/shared-files','name':'staging'}]\"</span>has been    \n           --sftp.factory.password<span class=\"token operator\">=</span><span class=\"token string\">'******'</span> --sftp.local-dir<span class=\"token operator\">=</span>/staging/shared-files --sftp.factory.allow-unknown-keys<span class=\"token operator\">=</span>true --sftp.factory.username<span class=\"token operator\">=</span><span class=\"token string\">'******'</span> --sftp.remote-dir<span class=\"token operator\">=</span>/remote-files --sftp.factory.host<span class=\"token operator\">=</span><span class=\"token number\">192.168</span>.99.1                                     successfully\n           --task.launch.request.taskName<span class=\"token operator\">=</span>fileIngestTask <span class=\"token operator\">|</span> task-launcher --spring.cloud.dataflow.client.server-uri<span class=\"token operator\">=</span>http://192.168.99.105:30826                                                                                                                  deployed    \n</code></pre></div>\n      </div>\n<h4 id=\"inspect-the-application-logs-2\" style=\"position:relative;\"><a href=\"#inspect-the-application-logs-2\" aria-label=\"inspect the application logs 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inspect the Application Logs</h4>\n<p>Use <code class=\"language-text\">kubectl</code> to list the apps. The <code class=\"language-text\">source</code> and <code class=\"language-text\">sink</code> applications should be in a started state.</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get pods\nNAME                                             READY   STATUS    RESTARTS   AGE\n<span class=\"token punctuation\">..</span>.\ninboundsftp-sftp-v12-6d55d469bd-t8znd            <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">0</span>          6m24s\ninboundsftp-task-launcher-v12-555d4785c5-zjr6b   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">0</span>          6m24s\n<span class=\"token punctuation\">..</span>.</code></pre></div>\n      </div>\n<p>The log files of the <code class=\"language-text\">sftp</code> source would be useful to debug issues such as SFTP connection failures and to verify SFTP downloads.</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl logs inboundsftp-sftp-v12-6d55d469bd-t8znd</code></pre></div>\n      </div>\n<p>The logs for the <code class=\"language-text\">task-launcher</code> application would be useful to debug data flow connection issues and verify task launch requests:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl logs inboundsftp-task-launcher-v12-555d4785c5-zjr6b</code></pre></div>\n      </div>\n<h4 id=\"copy-a-file-into-the-remote-directory-1\" style=\"position:relative;\"><a href=\"#copy-a-file-into-the-remote-directory-1\" aria-label=\"copy a file into the remote directory 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Copy a File into the Remote Directory</h4>\n<p>You can find sample data in the <code class=\"language-text\">data/</code> directory of the <a href=\"https://github.com/spring-cloud/spring-cloud-dataflow-samples/blob/master/dataflow-website/recipes/file-ingest/file-to-jdbc/file-to-jdbc.zip?raw=true\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">sample project</a>.</p>\n<p>Connect to the SFTP server and upload <code class=\"language-text\">data/name-list.csv</code> into the <code class=\"language-text\">remote-files</code> directory:</p>\n<p>When this file is detected, the <code class=\"language-text\">sftp</code> source downloads it to the <code class=\"language-text\">/var/scdf/shared-files</code> directory specified by <code class=\"language-text\">--local-dir</code>. We use the <code class=\"language-text\">/var/scdf</code> shared mount path that we configured for the <code class=\"language-text\">nfs</code> service. When the file is downloaded, the source emits a task launch request.\nThe task launch request includes the name of the task to launch, along with the local file path, given as a command line argument.\nSpring Batch binds each command line argument to a corresponding <code class=\"language-text\">JobParameter</code>.\nThe <code class=\"language-text\">FileIngestTask</code> job processes the file given by the <code class=\"language-text\">JobParameter</code> named <code class=\"language-text\">localFilePath</code>.\nSince there have not been any recent requests, the task launches within 30 seconds after the request is published (see the earlier tip about configuring the launch trigger).</p>\n<h4 id=\"inspect-job-executions-2\" style=\"position:relative;\"><a href=\"#inspect-job-executions-2\" aria-label=\"inspect job executions 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inspect Job Executions</h4>\n<p>To inspect job executions, run the following command (shown with its output):</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dataflow:<span class=\"token operator\">></span>job execution list\n\nID Task IDJob Name          Start Time         Step Execution Count Definition Status \n\n1  1      ingestJobThu Jun <span class=\"token number\">13</span> 08:39:59 EDT <span class=\"token number\">2019</span>1                    Created           \n</code></pre></div>\n      </div>\n<p>We can also list more details about that specific job execution:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dataflow:<span class=\"token operator\">></span>job execution display --id <span class=\"token number\">1</span>\n\n                    Key                                   Value               \n\nJob Execution Id                           1                                  \nTask Execution Id                          424                                \nTask Instance Id                           1                                  \nJob Name                                   ingestJob                          \nCreate Time                                Thu Jun <span class=\"token number\">13</span> 08:39:59 EDT <span class=\"token number\">2019</span>       \nStart Time                                 Thu Jun <span class=\"token number\">13</span> 08:39:59 EDT <span class=\"token number\">2019</span>       \nEnd Time                                   Thu Jun <span class=\"token number\">13</span> 08:40:07 EDT <span class=\"token number\">2019</span>       \nRunning                                    false                              \nStopping                                   false                              \nStep Execution Count                       1                                  \nExecution Status                           COMPLETED                          \nExit Status                                COMPLETED                          \nExit Message                                                                  \nDefinition Status                          Created                            \nJob Parameters                                                                \n-spring.cloud.task.executionid<span class=\"token punctuation\">(</span>STRING<span class=\"token punctuation\">)</span>     424                                \nrun.id<span class=\"token punctuation\">(</span>LONG<span class=\"token punctuation\">)</span>                               1                                  \n-spring.datasource.username<span class=\"token punctuation\">(</span>STRING<span class=\"token punctuation\">)</span>        ******                             \n-spring.cloud.task.name<span class=\"token punctuation\">(</span>STRING<span class=\"token punctuation\">)</span>            fileIngestTask                     \n-spring.datasource.password<span class=\"token punctuation\">(</span>STRING<span class=\"token punctuation\">)</span>        ******                             \n-spring.datasource.driverClassName<span class=\"token punctuation\">(</span>STRING<span class=\"token punctuation\">)</span> org.mariadb.jdbc.Driver            \nlocalFilePath<span class=\"token punctuation\">(</span>STRING<span class=\"token punctuation\">)</span>                      /staging/shared-files/name-list.csv\n-spring.datasource.url<span class=\"token punctuation\">(</span>STRING<span class=\"token punctuation\">)</span>             ******                             \n</code></pre></div>\n      </div>\n<h4 id=\"verify-data-2\" style=\"position:relative;\"><a href=\"#verify-data-2\" aria-label=\"verify data 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verify Data</h4>\n<p>When the the batch job runs, it processes the file in the local directory (<code class=\"language-text\">/staging/shared-files</code>), transforms each item to uppercase names, and inserts it into the database.</p>\n<p>Open a shell in the <code class=\"language-text\">mysql</code> container to query the <code class=\"language-text\">people</code> table:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl get pods\n<span class=\"token punctuation\">..</span>.\nmy-release-mysql-56f988dd6c-qlm8q                <span class=\"token number\">1</span>/1     Running\n<span class=\"token punctuation\">..</span>.</code></pre></div>\n      </div>\n<!-- Rolling my own to disable erroneous formating -->\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\">\n<pre class=\"language-bash\"><code>kubectl exec -it my-release-mysql-56f988dd6c-qlm8q -- /bin/bash\n# mysql -u root -p$MYSQL_ROOT_PASSWORD\nmysql&gt; select * from dataflow.people;\n</code></pre></div>\n      </div>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">+-----------+------------+-----------+\n| person_id | first_name | last_name |\n+-----------+------------+-----------+\n|         1 | AARON      | AABERG    |\n|         2 | AARON      | AABY      |\n|         3 | ABBEY      | AADLAND   |\n|         4 | ABBIE      | AAGAARD   |\n|         5 | ABBY       | AAKRE     |\n|         6 | ABDUL      | AALAND    |\n|         7 | ABE        | AALBERS   |\n|         8 | ABEL       | AALDERINK |\n|         9 | ABIGAIL    | AALUND    |\n|        10 | ABRAHAM    | AAMODT    |\n|      ...                           |\n+-----------+------------+-----------+</code></pre></div>\n      </div>\n<h2 id=\"limiting-concurrent-task-executions\" style=\"position:relative;\"><a href=\"#limiting-concurrent-task-executions\" aria-label=\"limiting concurrent task executions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Limiting Concurrent Task Executions</h2>\n<p>This recipe processes a single file with 5000+ items. What if we copy 100 files into the remote directory?\nThe <code class=\"language-text\">sftp</code> source processes them immediately, generating 100 task launch requests. The Dataflow Server launches tasks asynchronously, so this could potentially overwhelm the resources of the runtime platform.\nFor example, when running the Data Flow server on your local machine, each launched task creates a new JVM. In Cloud Foundry, each task creates a new container instance, and, in Kubernetes, a pod.</p>\n<p>Fortunately, Spring Cloud Data Flow provides configuration settings to <a href=\"https://docs.spring.io/spring-cloud-dataflow/docs/current/reference/htmlsingle/#spring-cloud-dataflow-task-limit-concurrent-executions\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">limit the number of concurrently running tasks</a>.</p>\n<p>We can use this sample to see how this works.</p>\n<h3 id=\"lower-the-maximum-concurrent-task-executions\" style=\"position:relative;\"><a href=\"#lower-the-maximum-concurrent-task-executions\" aria-label=\"lower the maximum concurrent task executions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lower the Maximum Concurrent Task Executions</h3>\n<p>The sample project includes twenty files in the <code class=\"language-text\">data/spilt</code> directory. To observe the limit in action, we can set the maximum concurrent tasks to 3.</p>\n<p>For running tasks on a local server, restart the server and add the following command line argument: <code class=\"language-text\">spring.cloud.dataflow.task.platform.local.accounts[default].maximum-concurrent-tasks=3</code>.</p>\n<p>If your process runs on Cloud Foundry, run the following command:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">cf set-env <span class=\"token operator\">&lt;</span>dataflow-server<span class=\"token operator\">></span> SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS<span class=\"token punctuation\">[</span>DEFAULT<span class=\"token punctuation\">]</span>_DEPLOYMENT_MAXIMUMCONCURRENTTASKS <span class=\"token number\">3</span></code></pre></div>\n      </div>\n<p>If your process runs on Kubernetes, edit the Data Flow server <code class=\"language-text\">configmap</code>, by running the following command:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl edit configmap my-release-data-flow-server</code></pre></div>\n      </div>\n<p>Add the <code class=\"language-text\">maximum-concurrent-tasks</code> property, as follows:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">application.yaml</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token punctuation\">-</span>\n    <span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">cloud</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">dataflow</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">task</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">platform</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">kubernetes</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">accounts</span><span class=\"token punctuation\">:</span>\n                  <span class=\"token key atrule\">default</span><span class=\"token punctuation\">:</span>\n                    <span class=\"token key atrule\">maximum-concurrent-tasks</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span>\n                    <span class=\"token key atrule\">limits</span><span class=\"token punctuation\">:</span>\n                      <span class=\"token key atrule\">memory</span><span class=\"token punctuation\">:</span> 1024Mi\n                      <span class=\"token key atrule\">cpu</span><span class=\"token punctuation\">:</span> 500m</code></pre></div>\n      </div>\n<p>After editing the <code class=\"language-text\">configmap</code>, delete the Data Flow server pod to force it to restart. Then wait for it to restart.</p>\n<h3 id=\"verify-that-the-maximum-concurrent-task-executions-is-enforced\" style=\"position:relative;\"><a href=\"#verify-that-the-maximum-concurrent-task-executions-is-enforced\" aria-label=\"verify that the maximum concurrent task executions is enforced permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Verify that the Maximum Concurrent Task Executions is Enforced</h3>\n<p>The task launcher sink polls the input destination. The polling period adjusts according to the presence of task launch requests and also to the number of currently running tasks reported through the Data Flow server's <code class=\"language-text\">tasks/executions/current</code> REST endpoint.\nThe sink queries this endpoint and pauses polling the input for new requests if the number of concurrent tasks for the task platform is at its limit.\nThis introduces a 1-30 second lag between the creation of the task launch request and the execution of the request, sacrificing some performance for resilience.\nTask launch requests are never sent to a dead letter queue because the server is busy or unavailable.\nThe exponential backoff also prevents the app from querying the server excessively when there are no task launch requests.</p>\n<h3 id=\"monitor-the-task-executions\" style=\"position:relative;\"><a href=\"#monitor-the-task-executions\" aria-label=\"monitor the task executions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Monitor the Task Executions</h3>\n<p>Tail the <code class=\"language-text\">task-launcher</code> container logs.</p>\n<p>You can also monitor the Data Flow server for current task executions:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">watch</span> <span class=\"token function\">curl</span> <span class=\"token operator\">&lt;</span>dataflow-server-url<span class=\"token operator\">></span>/tasks/executions/current\nEvery <span class=\"token number\">2</span>.0s: <span class=\"token function\">curl</span> http://192.168.99.105:30826/tasks/executions/current\n\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  <span class=\"token number\">0</span>     <span class=\"token number\">0</span>    <span class=\"token number\">0</span>     <span class=\"token number\">0</span>    <span class=\"token number\">0</span>     <span class=\"token number\">0</span>      <span class=\"token number\">0</span>      <span class=\"token number\">0</span> --:--:-- --:--:-- --:--:--     0100    <span class=\"token number\">92</span>    <span class=\"token number\">0</span>    <span class=\"token number\">92</span>    <span class=\"token number\">0</span>     <span class=\"token number\">0</span>   <span class=\"token number\">1202</span>      <span class=\"token number\">0</span> --:--:-- --:--:-- --:--:\n--  <span class=\"token number\">1210</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"name\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"default\"</span>,<span class=\"token string\">\"type\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"Kubernetes\"</span>,<span class=\"token string\">\"maximumTaskExecutions\"</span>:3,<span class=\"token string\">\"runningExecutionCount\"</span>:0<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span></code></pre></div>\n      </div>\n<h3 id=\"run-the-sample-with-multiple-files\" style=\"position:relative;\"><a href=\"#run-the-sample-with-multiple-files\" aria-label=\"run the sample with multiple files permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Run the Sample with Multiple Files</h3>\n<p>With the sample stream deployed, upload the twenty files in <code class=\"language-text\">data/spilt</code> to <code class=\"language-text\">/remote-files</code> files. In the <code class=\"language-text\">task-launcher</code> logs, you should see the exponential backoff working:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2019-06-14 15:00:48.247  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Polling period reset to 1000 ms.\n2019-06-14 15:00:49.265  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Launching Task fileIngestTask on platform default\n2019-06-14 15:00:50.433  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Launching Task fileIngestTask on platform default\n2019-06-14 15:00:51.686  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Launching Task fileIngestTask on platform default\n2019-06-14 15:00:52.929  WARN 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : The data Flow task platform default has reached its concurrent task execution limit: (3)\n2019-06-14 15:00:52.929  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Polling paused- increasing polling period to 2 seconds.\n2019-06-14 15:00:55.008  WARN 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : The data Flow task platform default has reached its concurrent task execution limit: (3)\n2019-06-14 15:00:55.008  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Polling paused- increasing polling period to 4 seconds.\n2019-06-14 15:00:59.039  WARN 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : The data Flow task platform default has reached its concurrent task execution limit: (3)\n2019-06-14 15:00:59.040  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Polling paused- increasing polling period to 8 seconds.\n2019-06-14 15:01:07.104  WARN 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : The data Flow task platform default has reached its concurrent task execution limit: (3)\n2019-06-14 15:01:07.104  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Polling paused- increasing polling period to 16 seconds.\n2019-06-14 15:01:23.127  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Polling resumed\n2019-06-14 15:01:23.128  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Launching Task fileIngestTask on platform default\n2019-06-14 15:01:23.232  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Polling period reset to 1000 ms.\n2019-06-14 15:01:24.277  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Launching Task fileIngestTask on platform default\n2019-06-14 15:01:25.483  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Launching Task fileIngestTask on platform default\n2019-06-14 15:01:26.743  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Launching Task fileIngestTask on platform default\n2019-06-14 15:01:28.035  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Launching Task fileIngestTask on platform default\n2019-06-14 15:01:29.324  WARN 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : The data Flow task platform default has reached its concurrent task execution limit: (3)\n2019-06-14 15:01:29.325  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Polling paused- increasing polling period to 2 seconds.\n2019-06-14 15:01:31.435  WARN 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : The data Flow task platform default has reached its concurrent task execution limit: (3)\n2019-06-14 15:01:31.436  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Polling paused- increasing polling period to 4 seconds.\n2019-06-14 15:01:35.531  WARN 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : The data Flow task platform default has reached its concurrent task execution limit: (3)\n2019-06-14 15:01:35.532  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Polling paused- increasing polling period to 8 seconds.\n2019-06-14 15:01:43.615  WARN 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : The data Flow task platform default has reached its concurrent task execution limit: (3)\n2019-06-14 15:01:43.615  INFO 1 --- [pool-2-thread-1] o.s.c.s.a.t.l.d.s.LaunchRequestConsumer  : Polling paused- increasing polling period to 16 seconds.</code></pre></div>\n      </div>\n<h2 id=\"avoiding-duplicate-processing\" style=\"position:relative;\"><a href=\"#avoiding-duplicate-processing\" aria-label=\"avoiding duplicate processing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Avoiding Duplicate Processing</h2>\n<p>The <code class=\"language-text\">sftp</code> source does not process files that it has already seen.\nIt uses a <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/#jdbc-metadata-store\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Metadata Store</a> to keep track of files by extracting content from messages at runtime.\nOut of the box, it uses an in-memory metadata store, but it is pluggable to a persistent store that is useful for production deployments.\nThus, if we re-deploy the stream or restart the <code class=\"language-text\">sftp</code> source, this state is lost and files are reprocessed.</p>\n<p>Thanks to the magic of Spring, we can auto-configure one of the available persistent Metadata Stores to prevent duplicate processing.</p>\n<p>In this example, we <a href=\"https://github.com/spring-cloud-stream-app-starters/core/tree/master/common/stream-apps-metadata-store-common#jdbc\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">auto configure the JDBC metadata store</a>, since we are already using a JDBC database.</p>\n<h3 id=\"configure-and-build-the-sftp-source\" style=\"position:relative;\"><a href=\"#configure-and-build-the-sftp-source\" aria-label=\"configure and build the sftp source permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configure and Build the SFTP Source</h3>\n<p>For this purpose, we add some JDBC dependencies to the <code class=\"language-text\">sftp-dataflow</code> source.</p>\n<p>Clone the [sftp]<a href=\"https://github.com/spring-cloud-stream-app-starters/sftp\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/spring-cloud-stream-app-starters/sftp</a> stream app starter.\nChange directory to the SFTP directory.\nIn the following command, replace <code class=\"language-text\">&lt;binder></code> with <code class=\"language-text\">kafka</code> or <code class=\"language-text\">rabbit</code> as appropriate for your configuration and run the command:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">./mvnw clean <span class=\"token function\">install</span> -DskipTests -PgenerateApps\n<span class=\"token builtin class-name\">cd</span> apps/sftp-dataflow-source-<span class=\"token operator\">&lt;</span>binder<span class=\"token operator\">></span></code></pre></div>\n      </div>\n<p>Add the following dependencies to <code class=\"language-text\">pom.xml</code>:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.integration<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-integration-jdbc<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>spring-boot-starter-jdbc<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>com.h2database<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>h2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></code></pre></div>\n      </div>\n<p>If you run on Kubernetes, use the mariadb driver instead of H2:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>org.mariadb.jdbc<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>mariadb-java-client<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>2.3.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></code></pre></div>\n      </div>\n<p>If you run on a local server with the in-memory H2 database, set the JDBC URL in <code class=\"language-text\">src/main/resources/application.properties</code> to use the Data Flow server's database:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">spring.datasource.url=jdbc:h2:tcp://localhost:19092/mem:dataflow</code></pre></div>\n      </div>\n<p>If you run on Kubernetes, set the datasource to use the internal IP of the <code class=\"language-text\">mysql</code> service, as the following example shows:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">spring.datasource.url=jdbc:mysql://10.98.214.235:3306/dataflow</code></pre></div>\n      </div>\n<p>If you rune in Cloud Foundry or Kubernetes, add the following property to <code class=\"language-text\">src/main/resources/application.properties</code>:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">spring.integration.jdbc.initialize-schema=always</code></pre></div>\n      </div>\n<p>Build the <code class=\"language-text\">sftp</code> source and register it with Data Flow.</p>\n<h3 id=\"run-the-sample-app\" style=\"position:relative;\"><a href=\"#run-the-sample-app\" aria-label=\"run the sample app permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Run the Sample App</h3>\n<p>Follow the instructions for running the sample on your preferred platform, up to the <code class=\"language-text\">Copy file...</code> step.</p>\n<p>If you have already completed the main exercise, restore the data to its initial state and redeploy the stream:</p>\n<ol>\n<li>Clean the local and remote data directories.</li>\n<li>Run the <code class=\"language-text\">DROP TABLE PEOPLE;</code> SQL command in the database.</li>\n<li>Undeploy the stream and deploy it again to run the updated <code class=\"language-text\">sftp</code> source.</li>\n</ol>\n<p>If you run in Cloud Foundry, set the deployment properties to bind <code class=\"language-text\">sftp</code> to the <code class=\"language-text\">mysql</code> service, as the following example shows:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dataflow<span class=\"token operator\">></span>stream deploy inboundSftp --properties <span class=\"token string\">\"deployer.sftp.cloudfoundry.services=nfs,mysql\"</span></code></pre></div>\n      </div>\n<h3 id=\"copy-a-file-into-the-remote-directory-2\" style=\"position:relative;\"><a href=\"#copy-a-file-into-the-remote-directory-2\" aria-label=\"copy a file into the remote directory 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Copy a File into the Remote Directory</h3>\n<p>We use one small file for this.\nThe <code class=\"language-text\">data/split</code> directory in the sample project contains the contents of\n<code class=\"language-text\">data/name-list.csv</code> split into 20 files. Upload <code class=\"language-text\">names_aa.csv</code>:</p>\n<h3 id=\"inspect-the-database\" style=\"position:relative;\"><a href=\"#inspect-the-database\" aria-label=\"inspect the database permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inspect the Database</h3>\n<p>By using a database tool, as described earlier, view the contents of the <code class=\"language-text\">INT_METADATA_STORE</code> table. The following image shows the result:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 617px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAABMUlEQVQY0z2P20oCYRSFffkuoiB6h6BIiUihTEorNM3TqM04OkfHw3geHRBqRv36FfPiY7EXi7X3jpw82lzEqpzfVjiL1Ti9KXH5oBDNGTx/ViiUJFpmF70zwNjTPzA4otv9I5FErUP1u0ZRkSmZFsWmUM1Ckho0myrD0YTBcMTwHzHvcEdjXDGPhE5nHtO5x2w2J1K3+tQNFUkp01AlFL3BwHWYjHcFLr2uQ7/XpWU5yLqJKha3WiqG1kZta8hGB8u2sSwT3REX1mSNdLZI6jXHy1uezHuBQkUWxY4IDMWrLmZvTKVpEU2kiN3FubqOcR9/IpMrk/z4IpnOki83RLkolBQN3/cJN1uCcMNvuOYnCAnWW+FBeNBA+J63YL5YMhfqLXwWS5/VarXPrEVmu4U/ri5lT+m3fXwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/b5225ae6c028be9ce4853b1afc998f90/507e6/metadata_store_1.webp 200w,\n/static/b5225ae6c028be9ce4853b1afc998f90/28a80/metadata_store_1.webp 400w,\n/static/b5225ae6c028be9ce4853b1afc998f90/0acf1/metadata_store_1.webp 617w\"\n          sizes=\"(max-width: 617px) 100vw, 617px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/b5225ae6c028be9ce4853b1afc998f90/36ca5/metadata_store_1.png 200w,\n/static/b5225ae6c028be9ce4853b1afc998f90/a3397/metadata_store_1.png 400w,\n/static/b5225ae6c028be9ce4853b1afc998f90/d7556/metadata_store_1.png 617w\"\n          sizes=\"(max-width: 617px) 100vw, 617px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/b5225ae6c028be9ce4853b1afc998f90/d7556/metadata_store_1.png\"\n          alt=\"JDBC Metadata Store\"\n          title=\"JDBC Metadata Store\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n    </span></p>\n<p>Note that there is a single key-value pair, where the key identifies the file name (the <code class=\"language-text\">sftpSource/</code> prefix provides a namespace for the <code class=\"language-text\">sftp</code> source app). The value is a timestamp indicating when the message was received.\nThe metadata store tracks files that have already been processed.\nThis prevents the same files from being pulled from the remote directory on every polling cycle.\nOnly new files or files that have been updated are processed.</p>\n<p>Since there are no uniqueness constraints on the <code class=\"language-text\">PEOPLE</code> table, a file being processed multiple times by our batch job results in duplicate table rows. Since we have configured a persistent metadata store, duplicate processing is prevented across container restarts. You can verify this by undeploying and redeploying the stream or by restarting the <code class=\"language-text\">sftp</code> source.</p>\n<p>If we view the <code class=\"language-text\">PEOPLE</code> table, it should look something like this:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 439px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAD9ElEQVQ4y21Ux3LjRhDFl7vKvvkvfHLtYWuPW9JKosQMgggMAAgm5EwADGCSZPu5ZyjZPvjQNWQnvH79ZoQ7M0RXmUIUB2h1RbTaXQwkGc2OCFlWsA5y/HQf4+cvY/zyu4pfv1n4rWFj7ScI4xR+lCLglvBT+KZ4+NHV8NQU8djo4HHioGW4GKpTfNfWuGsP8fVexJfvPdz1TPTNCF0jxngRwrIDzNY3s+yQn8KdkUBeWzDsEdzIRlaUKPcHlJsMXpIhikLEoYc0ClBtUuzKHHWV0+8MZVGQbbhtMhYrIIydHMvQheGvsHKXWK9W8F0HXphg7YWw6XQcB74fwLFt+AEhIWQ2jRgGATzP436XzrkbQjCXPqyZhZ6qo9nq4kejjW5PwmA8x5Ns4kGa4P6hgTb5Hp6aGGo6+S08ygb9f8bTcxtPL21I2hRNdQ6hp+iYTnWE2R5xcfywGn5aYUG8tDoD/HgR+f+kPCHKD4jzHX1giIeXHuZOgrQ6I6D6rDxAaA3GMM0ZdsdX7E+v/Dyc34jHE7wogyRrEOUJqsOF4m88h5kyMmDObRTbGtv6ymOsjjc0DAP59ozN7mbF/oKkOHBpPLf6kMcWqvqNck4Uv/CTNWz3VTRaIiE8cn9JddRwRA1N3qQkFOysDlekBH/txaRNCebCJeRvFDt/5Jwha9RQVGCtfV7DjCEVnnsqDNPkTZiDnWxsxsfaJc31h9AtGzsaiY3NckpqONbnRMUYXlzwcdmHdkdq2BlOOMK0OiGjsZnlBD/eHLB0YxpLJtHG3JdtbzlpWUObLvBISxmMZpwOVl/cRmZLMbFny/gg/N+lpBAlBWmxx/HyTjlXnrOrz9BnS0jKCP2BDD8pUVOcxWhkBTohZHJhsmCWEgo/3cJYeGgSh32SVkSImTxYnMlKJp12RFKAaiDc1IjJzxYrNLoKRqMRR1ATsvr8itP1DyR5CdePMVQ0DIYq8bgi9FfKI3kQUn22QFccYkFLub7/xdGxGOdQ00b8C9wIKUOyoldm4aaEcEjbVOkKFv/JqTGgm9XoSFj6OfdFVMc4Fl76GjXU/gdhBS9IoI51ejB2eH0HR8ByDoR0algQh8ShpCGIc15zpFqhSQ3Zu5d88lOyL12w8jPMVgFHp+r0aBBCL9ly9AyhRDpstGXadJ9UQNdvexM8NaQCVeWb5dfqeOVoo6yA7UVQRzrnUFLG5Lttc1dfMNHpQRlomBiLf64jm0547sqQFYWjYlpilu+vhDCFufRokyo3P6mwIf8t54g+cf9Aj8bEcrg2k+rEry2XDUP4yR/bFuMj/eBwas6xcnycX//k3H1yaC0dun4TKPRsVaRZxi/j8G8rV6nDa49N+wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/eff8ab7e482000b93d785d3c20b2b7e6/507e6/people_table_1.webp 200w,\n/static/eff8ab7e482000b93d785d3c20b2b7e6/28a80/people_table_1.webp 400w,\n/static/eff8ab7e482000b93d785d3c20b2b7e6/ba3b5/people_table_1.webp 439w\"\n          sizes=\"(max-width: 439px) 100vw, 439px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/eff8ab7e482000b93d785d3c20b2b7e6/36ca5/people_table_1.png 200w,\n/static/eff8ab7e482000b93d785d3c20b2b7e6/a3397/people_table_1.png 400w,\n/static/eff8ab7e482000b93d785d3c20b2b7e6/baa1b/people_table_1.png 439w\"\n          sizes=\"(max-width: 439px) 100vw, 439px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/eff8ab7e482000b93d785d3c20b2b7e6/baa1b/people_table_1.png\"\n          alt=\"People table\"\n          title=\"People table\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n    </span></p>\n<p>Now we can upload the same file to the SFTP server. If you are logged into it, you can update the timestamp, as follows:</p>\n<div class=\"spring-code\">\n        <button onClick=\"codeToClipboard(event)\" class=\"button button-clipboard\" type=\"button\">Copy</button>\n        <div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">touch</span> /remote-files/names_aa.csv</code></pre></div>\n      </div>\n<p>Now the file is reprocessed and the <code class=\"language-text\">PEOPLE</code> table contains duplicate data. If you <code class=\"language-text\">ORDER BY FIRST_NAME</code>, you see something like this:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 443px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAADSElEQVQ4y2WTy2/qRhTG/bd30W67qtRNs4qqtot7b1UpV0kIAWywsTF+AQbzsLHxC0zAgCGJrr6emaSp1C4+zXjOY37nnLHw3X2K7/+w8MNvOn78a4rrhxluBiuIfQeGqkCWZXQ6MnS9z/eyrCCOY6xWK6Rp+j8J190QN6KJrw8KvtZlfFZnuOvaUBUZdduDRAnakoRms4XhcIQoihCGIUJaP/akt30E4WaQoDcfYTTXESY+kixHTFqRwzxKEIVLLAMfYRAQQYJ1nqLIM6wz0nr9oYzotsUGgrHI4EULOEsPU3+KxXyOcBkgSjLMohxedsQ0zLFIdrSusUhLuFGB+SolqpAuC+Av5vCDJbyACC0vgTOaoq3beHxs4f5RhCgpEDUbn0UHV/cDXH1q4NfbPq6+SPgkeriuD3CnOrir1VEj/xrFdannzf4Ywp0eQBv6iLId4s2RK8z26KgGak0FP/3yO36+/hO38hD1nodad4zblo6GqOC23oY7i5BsTxSzQ16UEBpyH2PXxe74jP3pXxn2EDM/oqFoEEnZZodid8SGxFatb2O6iHB+BcVeeMyhemEJDQxHI+RPFda7N+Uk1RhQT2MiNSF1DaQFJSqfsSkv3EfRLH7OKtvszzx+W57fCEcjlx8W5bto3zOHmAcxmlIXcs/mSYp3n/XuRIQOGpIKa+jR2YXHPx0uEB4kDS6VzBy3dMBFDrwkKvmx2abyJyirV+7Dgor9CTpdqFJSRTOpDRWP21PpQqtrUskuUmosw2bKSIruYDKP8NDsoGeNeakZ86HgdHuE0nPQknW0qSXsm8WwCngP3f8OhfZ9cwB/GUPsdDFwZzhS9xlBSfbdoYJhDdFWelB1k6jP70N5hlATNU7InktSnD7UoaYPJgFqjQ6cyZLILohpMOyJxJsD9dVBXVThLXMirMh24n2mhNRYy8KBCNgNbPRsNaw3wrbcxXKVoXr+xumO5xciPcO0R9B0iz8ZRl9SzIlsQksxYJg2VsXp42Gz20Q6t9wFEcrQzAmRVVi926J8TwOhh07VWWP6x5/OiNZH3n+hLvU44enyym/4R87AhR/GRGFiMvVRkZ3RMb+SCMeTGdls8klwfvmGI1VWXV7wNy32gHMyrE/EAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/3db8661e5629898ff373ef74a2d98541/507e6/people_table_2.webp 200w,\n/static/3db8661e5629898ff373ef74a2d98541/28a80/people_table_2.webp 400w,\n/static/3db8661e5629898ff373ef74a2d98541/1ea1b/people_table_2.webp 443w\"\n          sizes=\"(max-width: 443px) 100vw, 443px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/3db8661e5629898ff373ef74a2d98541/36ca5/people_table_2.png 200w,\n/static/3db8661e5629898ff373ef74a2d98541/a3397/people_table_2.png 400w,\n/static/3db8661e5629898ff373ef74a2d98541/27348/people_table_2.png 443w\"\n          sizes=\"(max-width: 443px) 100vw, 443px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/3db8661e5629898ff373ef74a2d98541/27348/people_table_2.png\"\n          alt=\"People table with duplicates\"\n          title=\"People table with duplicates\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n    </span></p>\n<p>If we drop another one of files into the remote directory, that is processed, and we see another entry in the Metadata Store.</p>","headings":[{"value":"SFTP to JDBC File Ingest","depth":1},{"value":"Prerequisites","depth":2},{"value":"Data Flow Installation","depth":3},{"value":"Using Data Flow","depth":3},{"value":"SFTP server","depth":3},{"value":"NFS configuration","depth":3},{"value":"Cloud Foundry NFS configuration","depth":4},{"value":"Kubernetes NFS configuration","depth":4},{"value":"Deployment","depth":2},{"value":"Local","depth":3},{"value":"Register the Applications","depth":4},{"value":"Create the Task","depth":4},{"value":"Create and Deploy the Stream","depth":4},{"value":"Verify Stream deployment","depth":4},{"value":"Inspect the Application Logs","depth":4},{"value":"Copying a File into the Remote Directory","depth":4},{"value":"Inspect Job Executions","depth":4},{"value":"Verify Data","depth":4},{"value":"Cloud Foundry","depth":3},{"value":"Prerequisites","depth":4},{"value":"Register the Applications","depth":4},{"value":"Create the Task","depth":4},{"value":"Create the Stream","depth":4},{"value":"Deploy the stream","depth":4},{"value":"Verify Stream Deployment","depth":4},{"value":"Inspect the Application Logs","depth":4},{"value":"Copy a File into the Remote Directory","depth":4},{"value":"Inspect Job Executions","depth":4},{"value":"Verify Data","depth":4},{"value":"Kubernetes","depth":3},{"value":"Prerequisites","depth":4},{"value":"Register the Applications","depth":4},{"value":"Create the Task","depth":4},{"value":"Create the Stream","depth":4},{"value":"Deploy the Stream","depth":4},{"value":"Verify Stream deployment","depth":4},{"value":"Inspect the Application Logs","depth":4},{"value":"Copy a File into the Remote Directory","depth":4},{"value":"Inspect Job Executions","depth":4},{"value":"Verify Data","depth":4},{"value":"Limiting Concurrent Task Executions","depth":2},{"value":"Lower the Maximum Concurrent Task Executions","depth":3},{"value":"Verify that the Maximum Concurrent Task Executions is Enforced","depth":3},{"value":"Monitor the Task Executions","depth":3},{"value":"Run the Sample with Multiple Files","depth":3},{"value":"Avoiding Duplicate Processing","depth":2},{"value":"Configure and Build the SFTP Source","depth":3},{"value":"Run the Sample App","depth":3},{"value":"Copy a File into the Remote Directory","depth":3},{"value":"Inspect the Database","depth":3}],"fields":{"path":"/docs/2.9.0.SNAPSHOT/recipes/batch/sftp-to-jdbc/","version":"2.9.0.SNAPSHOT","category":"recipes","sourcePath":"pages/7-recipes/7-batch/2-sftp-to-jdbc.md"},"frontmatter":{"title":"SFTP to JDBC","summary":null,"path":"recipes/batch/sftp-to-jdbc/","toc":null,"prevNext":null}}},"pageContext":{"slug":"/docs/2.9.0.SNAPSHOT/recipes/batch/sftp-to-jdbc/","version":"2.9.0.SNAPSHOT","versionPath":""}},"staticQueryHashes":["2044043181"]}